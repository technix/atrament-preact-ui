(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var se,w,Ut,U,at,Nt,Oe,We,Re,je,Wt,te={},qt=[],xn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ke=Array.isArray;function M(e,t){for(var n in t)e[n]=t[n];return e}function Gt(e){var t=e.parentNode;t&&t.removeChild(e)}function ne(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?se.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return Z(e,c,o,r,null)}function Z(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++Ut,__i:-1,__u:0};return r==null&&w.vnode!=null&&w.vnode(s),s}function H(e){return e.children}function ee(e,t){this.props=e,this.context=t}function q(e,t){if(t==null)return e.__?q(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?q(e):null}function Yt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Yt(e)}}function Fe(e){(!e.__d&&(e.__d=!0)&&U.push(e)&&!me.__r++||at!==w.debounceRendering)&&((at=w.debounceRendering)||Nt)(me)}function me(){var e,t,n,o,r,s,c,l;for(U.sort(Oe);e=U.shift();)e.__d&&(t=U.length,o=void 0,s=(r=(n=e).__v).__e,c=[],l=[],n.__P&&((o=M({},r)).__v=r.__v+1,w.vnode&&w.vnode(o),qe(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[s]:null,c,s??q(r),!!(32&r.__u),l),o.__v=r.__v,o.__.__k[o.__i]=o,Jt(c,o,l),o.__e!=s&&Yt(o)),U.length>t&&U.sort(Oe));me.__r=0}function Kt(e,t,n,o,r,s,c,l,u,_,f){var a,p,d,h,b,y=o&&o.__k||qt,m=t.length;for(n.__d=u,Cn(n,t,y),u=n.__d,a=0;a<m;a++)(d=n.__k[a])!=null&&typeof d!="boolean"&&typeof d!="function"&&(p=d.__i===-1?te:y[d.__i]||te,d.__i=a,qe(e,d,p,r,s,c,l,u,_,f),h=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&Ge(p.ref,null,d),f.push(d.ref,d.__c||h,d)),b==null&&h!=null&&(b=h),65536&d.__u||p.__k===d.__k?(u&&!u.isConnected&&(u=q(p)),u=Xt(d,u,e)):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:h&&(u=h.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=b}function Cn(e,t,n){var o,r,s,c,l,u=t.length,_=n.length,f=_,a=0;for(e.__k=[],o=0;o<u;o++)c=o+a,(r=e.__k[o]=(r=t[o])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Z(null,r,null,null,null):ke(r)?Z(H,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Z(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=e,r.__b=e.__b+1,l=Pn(r,n,c,f),r.__i=l,s=null,l!==-1&&(f--,(s=n[l])&&(s.__u|=131072)),s==null||s.__v===null?(l==-1&&a--,typeof r.type!="function"&&(r.__u|=65536)):l!==c&&(l===c+1?a++:l>c?f>u-c?a+=l-c:a--:l<c?l==c-1&&(a=l-c):a=0,l!==o+a&&(r.__u|=65536))):(s=n[c])&&s.key==null&&s.__e&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=q(s)),Me(s,s,!1),n[c]=null,f--);if(f)for(o=0;o<_;o++)(s=n[o])!=null&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=q(s)),Me(s,s))}function Xt(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=Xt(o[r],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function He(e,t){return t=t||[],e==null||typeof e=="boolean"||(ke(e)?e.some(function(n){He(n,t)}):t.push(e)),t}function Pn(e,t,n,o){var r=e.key,s=e.type,c=n-1,l=n+1,u=t[n];if(u===null||u&&r==u.key&&s===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||l<t.length;){if(c>=0){if((u=t[c])&&!(131072&u.__u)&&r==u.key&&s===u.type)return c;c--}if(l<t.length){if((u=t[l])&&!(131072&u.__u)&&r==u.key&&s===u.type)return l;l++}}return-1}function lt(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||xn.test(t)?n:n+"px"}function le(e,t,n,o,r){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||lt(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||lt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=We,e.addEventListener(t,s?je:Re,s)):e.removeEventListener(t,s?je:Re,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function ut(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=We++;else if(t.t<n.u)return;return n(w.event?w.event(t):t)}}}function qe(e,t,n,o,r,s,c,l,u,_){var f,a,p,d,h,b,y,m,k,g,v,$,C,I,X,A=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),s=[l=t.__e=n.__e]),(f=w.__b)&&f(t);e:if(typeof A=="function")try{if(m=t.props,k=(f=A.contextType)&&o[f.__c],g=f?k?k.props.value:f.__:o,n.__c?y=(a=t.__c=n.__c).__=a.__E:("prototype"in A&&A.prototype.render?t.__c=a=new A(m,g):(t.__c=a=new ee(m,g),a.constructor=A,a.render=Ln),k&&k.sub(a),a.props=m,a.state||(a.state={}),a.context=g,a.__n=o,p=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),A.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=M({},a.__s)),M(a.__s,A.getDerivedStateFromProps(m,a.__s))),d=a.props,h=a.state,a.__v=t,p)A.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(A.getDerivedStateFromProps==null&&m!==d&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,g),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,g)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(V){V&&(V.__=t)}),v=0;v<a._sb.length;v++)a.__h.push(a._sb[v]);a._sb=[],a.__h.length&&c.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,g),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(d,h,b)})}if(a.context=g,a.props=m,a.__P=e,a.__e=!1,$=w.__r,C=0,"prototype"in A&&A.prototype.render){for(a.state=a.__s,a.__d=!1,$&&$(t),f=a.render(a.props,a.state,a.context),I=0;I<a._sb.length;I++)a.__h.push(a._sb[I]);a._sb=[]}else do a.__d=!1,$&&$(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++C<25);a.state=a.__s,a.getChildContext!=null&&(o=M(M({},o),a.getChildContext())),p||a.getSnapshotBeforeUpdate==null||(b=a.getSnapshotBeforeUpdate(d,h)),Kt(e,ke(X=f!=null&&f.type===H&&f.key==null?f.props.children:f)?X:[X],t,n,o,r,s,c,l,u,_),a.base=t.__e,t.__u&=-161,a.__h.length&&c.push(a),y&&(a.__E=a.__=null)}catch(V){t.__v=null,u||s!=null?(t.__e=l,t.__u|=u?160:32,s[s.indexOf(l)]=null):(t.__e=n.__e,t.__k=n.__k),w.__e(V,t,n)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=An(n.__e,t,n,o,r,s,c,u,_);(f=w.diffed)&&f(t)}function Jt(e,t,n){t.__d=void 0;for(var o=0;o<n.length;o++)Ge(n[o],n[++o],n[++o]);w.__c&&w.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){w.__e(s,r.__v)}})}function An(e,t,n,o,r,s,c,l,u){var _,f,a,p,d,h,b,y=n.props,m=t.props,k=t.type;if(k==="svg"?r="http://www.w3.org/2000/svg":k==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(_=0;_<s.length;_++)if((d=s[_])&&"setAttribute"in d==!!k&&(k?d.localName===k:d.nodeType===3)){e=d,s[_]=null;break}}if(e==null){if(k===null)return document.createTextNode(m);e=document.createElementNS(r,k,m.is&&m),s=null,l=!1}if(k===null)y===m||l&&e.data===m||(e.data=m);else{if(s=s&&se.call(e.childNodes),y=n.props||te,!l&&s!=null)for(y={},_=0;_<e.attributes.length;_++)y[(d=e.attributes[_]).name]=d.value;for(_ in y)if(d=y[_],_!="children"){if(_=="dangerouslySetInnerHTML")a=d;else if(_!=="key"&&!(_ in m)){if(_=="value"&&"defaultValue"in m||_=="checked"&&"defaultChecked"in m)continue;le(e,_,null,d,r)}}for(_ in m)d=m[_],_=="children"?p=d:_=="dangerouslySetInnerHTML"?f=d:_=="value"?h=d:_=="checked"?b=d:_==="key"||l&&typeof d!="function"||y[_]===d||le(e,_,d,y[_],r);if(f)l||a&&(f.__html===a.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(a&&(e.innerHTML=""),Kt(e,ke(p)?p:[p],t,n,o,k==="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&q(n,0),l,u),s!=null)for(_=s.length;_--;)s[_]!=null&&Gt(s[_]);l||(_="value",h!==void 0&&(h!==e[_]||k==="progress"&&!h||k==="option"&&h!==y[_])&&le(e,_,h,y[_],r),_="checked",b!==void 0&&b!==e[_]&&le(e,_,b,y[_],r))}return e}function Ge(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){w.__e(o,n)}}function Me(e,t,n){var o,r;if(w.unmount&&w.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Ge(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){w.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Me(o[r],t,n||typeof e.type!="function");n||e.__e==null||Gt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Ln(e,t,n){return this.constructor(e,n)}function Tn(e,t,n){var o,r,s,c;w.__&&w.__(e,t),r=(o=typeof n=="function")?null:t.__k,s=[],c=[],qe(t,e=(!o&&n||t).__k=ne(H,null,[e]),r||te,te,t.namespaceURI,!o&&n?[n]:r?null:t.firstChild?se.call(t.childNodes):null,s,!o&&n?n:r?r.__e:t.firstChild,o,c),Jt(s,e,c)}function In(e,t,n){var o,r,s,c,l=M({},e.props);for(s in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)s=="key"?o=t[s]:s=="ref"?r=t[s]:l[s]=t[s]===void 0&&c!==void 0?c[s]:t[s];return arguments.length>2&&(l.children=arguments.length>3?se.call(arguments,2):n),Z(e.type,l,o||e.key,r||e.ref,null)}function Ye(e,t){var n={__c:t="__cC"+Wt++,__:e,Consumer:function(o,r){return o.children(r)},Provider:function(o){var r,s;return this.getChildContext||(r=[],(s={})[t]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&r.some(function(l){l.__e=!0,Fe(l)})},this.sub=function(c){r.push(c);var l=c.componentWillUnmount;c.componentWillUnmount=function(){r.splice(r.indexOf(c),1),l&&l.call(c)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}se=qt.slice,w={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(l){e=l}throw e}},Ut=0,ee.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=M({},this.state),typeof e=="function"&&(e=e(M({},n),this.props)),e&&M(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Fe(this))},ee.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Fe(this))},ee.prototype.render=H,U=[],Nt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Oe=function(e,t){return e.__v.__b-t.__v.__b},me.__r=0,We=0,Re=ut(!1),je=ut(!0),Wt=0;var On=0;function i(e,t,n,o,r,s){t||(t={});var c,l,u=t;if("ref"in u)for(l in u={},t)l=="ref"?c=t[l]:u[l]=t[l];var _={type:e,props:u,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--On,__i:-1,__u:0,__source:r,__self:s};if(typeof e=="function"&&(c=e.defaultProps))for(l in c)u[l]===void 0&&(u[l]=c[l]);return w.vnode&&w.vnode(_),_}const Rn="modulepreload",jn=function(e,t){return e[0]==="."?new URL(e,t).href:e},_t={},dt=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=Promise.all(n.map(u=>{if(u=jn(u,o),u in _t)return;_t[u]=!0;const _=u.endsWith(".css"),f=_?'[rel="stylesheet"]':"";if(!!o)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===u&&(!_||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=_?"stylesheet":Rn,_||(p.as="script",p.crossOrigin=""),p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),_)return new Promise((d,h)=>{p.addEventListener("load",d),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}return r.then(()=>t()).catch(s=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s})};var K,S,xe,ft,oe=0,Qt=[],he=[],E=w,ht=E.__b,pt=E.__r,gt=E.diffed,mt=E.__c,vt=E.unmount,yt=E.__;function we(e,t){E.__h&&E.__h(S,e,oe||t),oe=0;var n=S.__H||(S.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:he}),n.__[e]}function R(e){return oe=1,Fn(tn,e)}function Fn(e,t,n){var o=we(K++,2);if(o.t=e,!o.__c&&(o.__=[tn(void 0,t),function(l){var u=o.__N?o.__N[0]:o.__[0],_=o.t(u,l);u!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=S,!S.u)){var r=function(l,u,_){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!s||s.call(this,l,u,_);var a=!1;return f.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(a=!0)}}),!(!a&&o.__c.props===l)&&(!s||s.call(this,l,u,_))};S.u=!0;var s=S.shouldComponentUpdate,c=S.componentWillUpdate;S.componentWillUpdate=function(l,u,_){if(this.__e){var f=s;s=void 0,r(l,u,_),s=f}c&&c.call(this,l,u,_)},S.shouldComponentUpdate=r}return o.__N||o.__}function L(e,t){var n=we(K++,3);!E.__s&&en(n.__H,t)&&(n.__=e,n.i=t,S.__H.__h.push(n))}function Hn(e){return oe=5,Zt(function(){return{current:e}},[])}function Zt(e,t){var n=we(K++,7);return en(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function P(e,t){return oe=8,Zt(function(){return e},t)}function Se(e){var t=S.context[e.__c],n=we(K++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(S)),t.props.value):e.__}function Mn(){for(var e;e=Qt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(pe),e.__H.__h.forEach(Ve),e.__H.__h=[]}catch(t){e.__H.__h=[],E.__e(t,e.__v)}}E.__b=function(e){S=null,ht&&ht(e)},E.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),yt&&yt(e,t)},E.__r=function(e){pt&&pt(e),K=0;var t=(S=e.__c).__H;t&&(xe===S?(t.__h=[],S.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=he,n.__N=n.i=void 0})):(t.__h.forEach(pe),t.__h.forEach(Ve),t.__h=[],K=0)),xe=S},E.diffed=function(e){gt&&gt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Qt.push(t)!==1&&ft===E.requestAnimationFrame||((ft=E.requestAnimationFrame)||Vn)(Mn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==he&&(n.__=n.__V),n.i=void 0,n.__V=he})),xe=S=null},E.__c=function(e,t){t.some(function(n){try{n.__h.forEach(pe),n.__h=n.__h.filter(function(o){return!o.__||Ve(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],E.__e(o,n.__v)}}),mt&&mt(e,t)},E.unmount=function(e){vt&&vt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{pe(o)}catch(r){t=r}}),n.__H=void 0,t&&E.__e(t,n.__v))};var bt=typeof requestAnimationFrame=="function";function Vn(e){var t,n=function(){clearTimeout(o),bt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);bt&&(t=requestAnimationFrame(n))}function pe(e){var t=S,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),S=t}function Ve(e){var t=S;e.__c=e.__(),S=t}function en(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function tn(e,t){return typeof t=="function"?t(e):t}var zn={};function ue(e,t){for(var n in t)e[n]=t[n];return e}function Dn(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,s=e.match(r),c={};if(s&&s[1])for(var l=s[1].split("&"),u=0;u<l.length;u++){var _=l[u].split("=");c[decodeURIComponent(_[0])]=decodeURIComponent(_.slice(1).join("="))}e=ze(e.replace(r,"")),t=ze(t||"");for(var f=Math.max(e.length,t.length),a=0;a<f;a++)if(t[a]&&t[a].charAt(0)===":"){var p=t[a].replace(/(^:|[+*?]+$)/g,""),d=(t[a].match(/[+*?]+$/)||zn)[0]||"",h=~d.indexOf("+"),b=~d.indexOf("*"),y=e[a]||"";if(!y&&!b&&(d.indexOf("?")<0||h)){o=!1;break}if(c[p]=decodeURIComponent(y),h||b){c[p]=e.slice(a).map(decodeURIComponent).join("/");break}}else if(t[a]!==e[a]){o=!1;break}return(n.default===!0||o!==!1)&&c}function Bn(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function Un(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:ze(n.props.path).map(Nn).join("")}(e),e.props}function ze(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Nn(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Wn={},N=[],kt=[],O=null,nn={url:Ke()},qn=Ye(nn);function Ke(){var e;return""+((e=O&&O.location?O.location:O&&O.getCurrentLocation?O.getCurrentLocation():typeof location<"u"?location:Wn).pathname||"")+(e.search||"")}function W(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var o=N.length;o--;)if(N[o].canRoute(n))return!0;return!1}(e)&&function(n,o){o===void 0&&(o="push"),O&&O[o]?O[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)}(e,t?"replace":"push"),on(e)}function on(e){for(var t=!1,n=0;n<N.length;n++)N[n].routeTo(e)&&(t=!0);return t}function Gn(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return W(t)}}function Yn(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Kn(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Gn(t))return Yn(e)}while(t=t.parentNode)}}var wt=!1;function rn(e){e.history&&(O=e.history),this.state={url:e.url||Ke()}}ue(rn.prototype=new ee,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=He(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;wt||(wt=!0,O||addEventListener("popstate",function(){on(Ke())}),addEventListener("click",Kn)),N.push(this),O&&(this.u=O.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),N.splice(N.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(Un).sort(Bn);for(var n=0;n<e.length;n++){var o=e[n],r=Dn(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,s=t.url,c=this.c,l=this.g(He(e.children),s);if(l&&(o=In(l[0],ue(ue({url:s,matches:n=l[1]},n),{key:void 0,ref:void 0}))),s!==(c&&c.url)){ue(nn,c=this.c={url:s,previous:c&&c.url,current:o,path:o?o.props.path:null,matches:n}),c.router=this,c.active=o?[o]:[];for(var u=kt.length;u--;)kt[u]({});typeof r=="function"&&r(c)}return ne(qn.Provider,{value:c},o)}});function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ve.apply(null,arguments)}var Y;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Y||(Y={}));var St=function(e){return e};function Xn(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,s=o.map(function(g){var v=St(ve({pathname:"/",search:"",hash:"",state:null,key:xt()},typeof g=="string"?Ct(g):g));return v}),c=$t(r??s.length-1,0,s.length-1),l=Y.Pop,u=s[c],_=Et(),f=Et();function a(g){return typeof g=="string"?g:Jn(g)}function p(g,v){return v===void 0&&(v=null),St(ve({pathname:u.pathname,search:"",hash:""},typeof g=="string"?Ct(g):g,{state:v,key:xt()}))}function d(g,v,$){return!f.length||(f.call({action:g,location:v,retry:$}),!1)}function h(g,v){l=g,u=v,_.call({action:l,location:u})}function b(g,v){var $=Y.Push,C=p(g,v);function I(){b(g,v)}d($,C,I)&&(c+=1,s.splice(c,s.length,C),h($,C))}function y(g,v){var $=Y.Replace,C=p(g,v);function I(){y(g,v)}d($,C,I)&&(s[c]=C,h($,C))}function m(g){var v=$t(c+g,0,s.length-1),$=Y.Pop,C=s[v];function I(){m(g)}d($,C,I)&&(c=v,h($,C))}var k={get index(){return c},get action(){return l},get location(){return u},createHref:a,push:b,replace:y,go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(v){return _.push(v)},block:function(v){return f.push(v)}};return k}function $t(e,t,n){return Math.min(Math.max(e,t),n)}function Et(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function xt(){return Math.random().toString(36).substr(2,8)}function Jn(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,s=e.hash,c=s===void 0?"":s;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function Ct(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}var D,De=function(e,t){return De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},De(e,t)},Pt=function(e){function t(n,o){var r=e.call(this,"Translation failed")||this;return r.id=n,r.language=o,r}return function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function r(){this.constructor=n}De(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}(t,e),t.is=function(n){return n instanceof t},t}(Error),Qn=function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e}();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(D||(D={}));var Zn=["{","}",","],eo=function(){function e(t){this.input=new Qn(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile(function(o){return!function(r){return Zn.includes(r)}(o)}).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:D.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:D.Text,value:this.readWhile(function(t){return t!=="{"&&t!=="}"})}},e.prototype.readVariableType=function(){var t=this.readWhile(function(n){return n!==","}).trim();return t==="plural"?D.Plural:t==="select"?D.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e}();function to(e,t,n){for(var o=new eo(t),r=[],s=function(c){var l=c.options,u=c.type,_=c.value;if(u!==D.Variable)if(l)if(u!==D.Select)try{r.concat(l[new Intl.PluralRules(e).select(n[_])].map(s))}catch{r.concat(l.other.map(s))}else r.concat((l[n[_]]||l.other).map(s));else r.push(_);else r.push(n[_])};!o.input.done;)s(o.next());return r}var sn=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(r,s){return new Intl.DateTimeFormat(n.language,s).format(r)},this.formatNumber=function(r,s){return new Intl.NumberFormat(n.language,s).format(r)},this.translate=function(r,s){s===void 0&&(s={});var c=n.getMessageById(r,s.defaultMessage);if(typeof c=="string")try{return to(n.language,c,s).join("")}catch{n.onError(new Pt(r,n.language))}return c+""},this.getMessageById=function(r,s){if(!n.memo[r]){var c=n.messages[r];c===void 0&&(c=r.split(".").reduce(function(l,u){return l?l[u]:void 0},n.messages)),typeof c!="string"&&(n.onError(new Pt(r,n.language)),c=s||r),n.memo[r]=c}return n.memo[r]};var o=t.find(function(r){return r.language===e});this.language=e,this.messages=o?o.messages:{}};function no(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var Xe=Ye({language:"",locales:[],setLanguage:function(){},translator:new sn}),oo=function(e){var t=e.children,n=e.language,o=e.locales,r=e.onError,s=R(n);L(function(){s[1](n)},[n]);var c=new sn(s[0],o);return r&&(c.onError=r),ne(Xe.Provider,{value:{language:s[0],locales:o,setLanguage:s[1],translator:c}},t)};function Je(e){var t=Se(Xe);return t.translator}var j=function(e){var t=e.html,n=e.id,o=e.tagName,r=o===void 0?"span":o,s=no(e,["children","html","id","tagName"]),c=Se(Xe).translator.translate(n,s);return t?ne(r,{dangerouslySetInnerHTML:{__html:c}}):ne(H,null,c)};const Qe=Ye(null),ro="Atrament Preact UI demo",so="atrament-preact-ui",io="Atrament Preact UI - shell for Ink games",co="light",ao="System",lo="en",uo={path:"game",source:"intercept.ink",script:"intercept.ink.json"},ie={name:ro,short_name:so,description:io,theme:co,font:ao,language:lo,game:uo},cn=ie.game.path,an=ie.game.script,_o=["Atrament://",window.location.host,window.location.pathname,cn,"/",an].join(""),fo=ie.language,ln=ie.theme,un=ie.font,Ze=100,$e=10,Be=Ze-$e*3,Ue=Ze+$e*5,ho="_autosave_";function po(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}function go(e){const t=e.state.get().metadata.theme||ln;e.settings.get("theme")||e.settings.set("theme",t)}function mo(e){const t=e.state.get().metadata.font||un;e.settings.get("font")||e.settings.set("font",t)}const vo={"--bg-color":"#FCFCFC","--fg-color":"#5D576B","--shade-color":"rgba(0, 0, 0, 0.1)","--font-color":"#333333","--accent-bg-color":"#FCFCFC","--accent-fg-color":"#F7567C","--border-radius":"0.5rem","--border-radius-inline":"0.25rem"},yo={"--bg-color":"#ffeedb","--fg-color":"#4c3b4d","--shade-color":"rgba(0, 0, 0, 0.1)","--font-color":"#333333","--accent-bg-color":"#ffeedb","--accent-fg-color":"#a53850","--border-radius":"0.5rem","--border-radius-inline":"0.25rem"},bo={"--bg-color":"#4c3b4d","--fg-color":"#FCFCFC","--shade-color":"rgba(255, 255, 255, 0.1)","--font-color":"#EEEEEE","--accent-bg-color":"#EEEEEE","--accent-fg-color":"#F7567C","--border-radius":"0.5rem","--border-radius-inline":"0.25rem"},Ne={light:vo,sepia:yo,dark:bo};function ko(e){Object.entries(Ne[e]||Ne[ln]).forEach(([t,n])=>{document.documentElement.style.setProperty(t,n)})}const z='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',re={System:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, ${z}`,"Sans Serif":`"Trebuchet MS", "Lucida Grande", Arial, Helvetica, ${z}`,Serif:`"Palatino", "Cambria", "Lucida Bright", "Georgia", "Times New Roman", ${z}`,Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", ${z}`,"Fira Sans":`"Fira Sans", sans-serif, ${z}`,Lora:`"Lora", serif, ${z}`,Merriweather:`"Merriweather", serif, ${z}`,OpenDyslexic:`"OpenDyslexic", serif, ${z}`};function wo(e){document.documentElement.style.setProperty("--font-game",re[e]||re[un])}async function So(e,t){if(e&&!document.fullscreenElement)try{await document.documentElement.requestFullscreen()}catch{t(!1)}else document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen()}function $o(e,t){So(e,t)}function Eo(e){e.settings.defineHandler("theme",(t,n)=>{ko(n)}),e.settings.defineHandler("font",(t,n)=>{wo(n)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")}),e.settings.defineHandler("fullscreen",(t,n)=>{$o(n,o=>{e.settings.set("fullscreen",o),e.settings.save()})})}function xo(e){e.images=[],e.content=e.content.map(t=>(t.tags.IMAGE&&(e.images.push(t.tags.IMAGE),t.image=t.tags.IMAGE),t))}function Co(e){e.choices=e.choices.map(t=>((t.tags.UNCLICKABLE||t.tags.DISABLED||t.tags.INACTIVE)&&(t.disabled=!0),t))}function Po(e){var o,r;const t=(o=e.tags)==null?void 0:o.BACKGROUND;typeof t<"u"&&(e.images.push(t),this.state.setSubkey("game","background",t));const n=(r=e.tags)==null?void 0:r.PAGE_BACKGROUND;typeof n<"u"&&(e.images.push(n),this.state.setSubkey("game","background_page",n))}function Ao(e){[xo,Co,Po].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function Lo(e){e.ink.story().onError=t=>{e.state.setKey("ERROR",t)},e.state.setKey("OVERLAY",{activeOverlay:null,content:""})}async function To(e,t){e.on("*",(n,o)=>console.log(`%c Atrament > ${n} `,"color: #111111; background-color: #7FDBFF;",o)),Eo(e),await e.init(t,{applicationID:_o,settings:{fullscreen:!1,animation:!0,mute:!1,volume:50,fontSize:100}}),e.on("game/start",()=>Lo(e)),await e.game.init(cn,an),await e.game.initInkStory(),go(e),mo(e),Ao(e),po(e)}const Io="_application_wrapper_6fi81_1",Oo={application_wrapper:Io};let Ce;function _n(){window.innerHeight!==Ce&&(Ce=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${Ce-1}px`))}window.addEventListener("resize",_n);const At=({children:e})=>(L(_n,[]),i("div",{class:[Oo.application_wrapper,"atrament-ui-app"].join(" "),children:e})),Ro="_loading_ffxmc_1",jo={loading:Ro},Fo="_container_4l08p_1",Ho={container:Fo},Ee=({children:e,style:t={}})=>i("div",{style:t,class:[Ho.container,"atrament-container"].join(" "),children:e}),Mo="_container_flex_at0vo_1",Vo={container_flex:Mo},et=({children:e})=>i("div",{class:[Vo.container_flex,"atrament-flex-container"].join(" "),children:e}),zo="_sk_cube_grid_fv0g6_1",Do="_sk_cube1_fv0g6_17",Bo="_sk_cube2_fv0g6_18",Uo="_sk_cube3_fv0g6_19",No="_sk_cube4_fv0g6_20",Wo="_sk_cube5_fv0g6_21",qo="_sk_cube6_fv0g6_22",Go="_sk_cube7_fv0g6_23",Yo="_sk_cube8_fv0g6_24",Ko="_sk_cube9_fv0g6_25",F={sk_cube_grid:zo,"sk-cubeGridScaleDelay":"_sk-cubeGridScaleDelay_fv0g6_1",sk_cube1:Do,sk_cube2:Bo,sk_cube3:Uo,sk_cube4:No,sk_cube5:Wo,sk_cube6:qo,sk_cube7:Go,sk_cube8:Yo,sk_cube9:Ko},Xo=()=>i("div",{class:F.sk_cube_grid,children:[i("div",{class:F.sk_cube1}),i("div",{class:F.sk_cube2}),i("div",{class:F.sk_cube3}),i("div",{class:F.sk_cube4}),i("div",{class:F.sk_cube5}),i("div",{class:F.sk_cube6}),i("div",{class:F.sk_cube7}),i("div",{class:F.sk_cube8}),i("div",{class:F.sk_cube9})]}),Jo=()=>i(Ee,{children:i(et,{children:i("div",{class:[jo.loading,"atrament-loading"].join(" "),children:i(Xo,{})})})});function Qo(e,t,n){let o=new Set([...t,void 0]);return e.listen((r,s,c)=>{o.has(c)&&n(r,s,c)})}function Zo(e,t={}){let[,n]=R({}),[o]=R(e.get());return L(()=>{o!==e.get()&&n({})},[]),L(()=>{let r,s,c,l=()=>{r||(r=1,s=setTimeout(()=>{r=void 0,n({})}))};return t.keys?c=Qo(e,t.keys,l):c=e.listen(l),()=>{c(),clearTimeout(s)}},[e,""+t.keys]),e.get()}const x=()=>{const e=Se(Qe),t=P(r=>r?e.game.getAssetPath(r):null,[e]),n=P((r,s)=>{e.settings.set(r,s),e.settings.save()},[e]),o=P((...r)=>e.state.setSubkey(...r),[e]);return{atrament:e,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:e.game.makeChoice,continueStory:e.game.continueStory,getAssetPath:t,updateSettings:n,setStateSubkey:o}},T=()=>{const e=Se(Qe);return Zo(e.store)},er="_block_5hv3c_1",tr="_block_start_5hv3c_6",nr="_block_end_5hv3c_10",Pe={block:er,block_start:tr,block_end:nr},ye=({children:e,align:t=null})=>{const n=[Pe.block];return t==="start"?n.push(Pe.block_start):t==="end"&&n.push(Pe.block_end),n.push("atrament-block"),i("div",{class:n.join(" "),children:e})},or="_imagebox_hmqoq_1",rr="_image_hmqoq_1",Lt={imagebox:or,image:rr},dn=({src:e})=>i("div",{class:[Lt.imagebox,"atrament-image-container"].join(" "),children:i("img",{src:e,class:[Lt.image,"atrament-image"].join(" ")})}),sr="_header_1v1u3_1",ir="_header_align_1v1u3_9",Tt={header:sr,header_align:ir},cr=({children:e})=>i("div",{class:[Tt.header,"atrament-header"].join(" "),children:i("div",{class:Tt.header_align,children:e})}),ar="_link_menu_go234_1",lr={link_menu:ar},ge=({children:e,key:t,onClick:n})=>i("div",{children:i("button",{onClick:n,class:lr.link_menu,children:e},t)}),ur="_settings_container_13ssq_1",_r="_settings_toggle_13ssq_12",It={settings_container:ur,settings_toggle:_r},dr="_backdrop_rne3i_1",fr={backdrop:dr},fn=({onClick:e})=>i("div",{class:[fr.backdrop,"atrament-backdrop"].join(" "),onClick:e}),hr="_modal_1n9pe_1",pr={modal:hr},hn=({children:e})=>i("div",{class:[pr.modal,"atrament-modal"].join(" "),children:e}),gr="_close_eyo4x_1",mr={close:gr},pn=({onClick:e})=>i("div",{class:mr.close,children:i("button",{onClick:e,title:"Close",children:"✕"})}),vr="_collapse_ho40v_1",yr="_collapse_title_ho40v_6",br="_collapse_children_ho40v_12",Ae={collapse:vr,collapse_title:yr,collapse_children:br},kr=({title:e,children:t})=>i("details",{class:Ae.collapse,children:[i("summary",{class:Ae.collapse_title,children:e}),i("div",{class:Ae.collapse_children,children:t})]}),wr="_checkbox_wrapper_1bc4s_1",Sr="_checkbox_1bc4s_1",Ot={checkbox_wrapper:wr,checkbox:Sr,"focus-visible":"_focus-visible_1bc4s_56"},tt=({enabled:e,onChange:t})=>i("div",{class:Ot.checkbox_wrapper,children:i("input",{type:"checkbox",class:Ot.checkbox,checked:e,onChange:t})}),$r=()=>{const{updateSettings:e}=x(),t=T(),n=o=>e("fullscreen",o.target.checked);return i("div",{class:["atrament-settings-fullscreen"].join(" "),children:[i(tt,{enabled:t.settings.fullscreen,onChange:n})," ",i(j,{id:"settings.fullscreen"})]})},Er="_settings_sound_container_z755p_1",xr="_settings_sound_input_container_z755p_6",Cr="_settings_sound_volume_z755p_10",Pr="_settings_sound_icon_z755p_17",G={settings_sound_container:Er,settings_sound_input_container:xr,settings_sound_volume:Cr,settings_sound_icon:Pr},Ar=()=>i("svg",{fill:"none",viewBox:"0 0 15 15",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:i("path",{"clip-rule":"evenodd",d:"m2 3.5c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.2761.22386-.5.5-.5h10c.2761 0 .5.2239.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.2239-.5-.5z",style:"fill:var(--fg-color)","fill-rule":"evenodd"})}),Lr=()=>i("svg",{viewBox:"0 0 28 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:i("path",{d:"m150 3937.5h2v-16h-2zm-4-2h2v-12h-2zm-4-2h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-124 -3919)",style:"fill:var(--fg-color)"})}),Tr=()=>i("svg",{viewBox:"0 0 20 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:i("path",{d:"m222 3933.5h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-204 -3919)",style:"fill:var(--fg-color)"})}),Ir=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%",children:[i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z",style:"fill:var(--fg-color)"})]}),Or=()=>{const{updateSettings:e}=x(),t=T(),n=c=>e("mute",!c.target.checked),o=c=>e("volume",c.target.value),{mute:r,volume:s}=t.settings;return i(H,{children:[i("div",{class:[G.settings_sound,"atrament-settings-sound"].join(" "),children:[i(tt,{enabled:!r,onChange:n})," ",i(j,{id:"settings.sound"})]}),i("div",{class:G.settings_sound_container,children:[i("div",{class:G.settings_sound_icon,children:i(Tr,{})}),i("div",{class:G.settings_sound_input_container,children:i("input",{class:G.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:s,onChange:o})}),i("div",{class:G.settings_sound_icon,children:i(Lr,{})})]})]})},Rr="_settings_fontsize_container_1ho7s_1",jr="_settings_font_a_1ho7s_6",Fr="_settings_fontsize_input_container_1ho7s_12",Hr="_settings_fontsize_input_1ho7s_12",Mr="_settings_font_sample_1ho7s_22",B={settings_fontsize_container:Rr,settings_font_a:jr,settings_fontsize_input_container:Fr,settings_fontsize_input:Hr,settings_font_sample:Mr},gn=[];for(let e=Be;e<=Ue;e+=$e)gn.push(e);const Vr=()=>{const{updateSettings:e}=x(),t=T(),{font:n,fontSize:o}=t.settings,r=s=>e("fontSize",s.target.value);return i("div",{class:[B.settings_text,"atrament-settings-text"].join(" "),children:[i("div",{class:B.settings_fontsize_container,children:[i("div",{class:B.settings_font_a,style:{"font-size":`${Be}%`},children:"A"}),i("div",{class:B.settings_fontsize_input_container,children:[i("input",{class:B.settings_fontsize_input,type:"range",min:Be,max:Ue,step:$e,value:o||Ze,onInput:r,list:"fontSizes"}),i("datalist",{id:"fontSizes",children:gn.map(s=>i("option",{value:s},s))})]}),i("div",{class:B.settings_font_a,style:{"font-size":`${Ue}%`},children:"A"})]}),i("div",{class:B.settings_font_sample,style:{"font-size":`${o}%`,"font-family":re[n]},children:i(j,{id:"font.sampleText"})})]})},zr="_settings_font_container_yph84_1",Dr={settings_font_container:zr},Br=()=>{const{updateSettings:e}=x(),t=T(),n=r=>e("font",r.target.value),o=t.settings.font;return i("div",{class:[Dr.settings_font_container,"atrament-settings-font"].join(" "),children:i("select",{onChange:n,style:{"font-family":re[o]},children:Object.entries(re).map(([r,s])=>i("option",{value:r,style:{"font-family":s},selected:o===r,children:r},r))})})},Ur="_settings_theme_container_1gr28_1",Nr="_settings_theme_button_1gr28_8",mn={settings_theme_container:Ur,settings_theme_button:Nr},Wr=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["--fg-color"],"background-color":t["--bg-color"]};return i("button",{class:mn.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:i(j,{id:`themes.${e}`,defaultMessage:e})})},qr=()=>{const{updateSettings:e}=x(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return i("div",{class:[mn.settings_theme_container,"atrament-settings-theme"].join(" "),children:Object.entries(Ne).map(([n,o])=>i(Wr,{themeId:n,themeConfig:o,onClick:t},n))})},Gr=()=>{const{updateSettings:e}=x(),t=T(),n=o=>e("animation",o.target.checked);return i("div",{class:["atrament-settings-animation"].join(" "),children:[i(tt,{enabled:t.settings.animation,onChange:n})," ",i(j,{id:"settings.animations"})]})},Yr="_settings_about_hjypz_1",Kr={settings_about:Yr},Xr=()=>{const{atrament:e}=x();return i("div",{class:Kr.settings_about,children:["atrament ",e.version]})},Jr="_link_home_1sln5_1",Qr={link_home:Jr},vn=({children:e,onClick:t})=>i("button",{onClick:t,class:Qr.link_home,children:e},"mainmenu"),Zr=()=>{const{atrament:e}=x();return i(vn,{onClick:async()=>{await e.game.save(ho),W("/")},children:i(j,{id:"game.save-and-quit"})})},nt=()=>{const e=Je(),[t,n]=R(!1),o=P(()=>n(!t),[t]),r=P(s=>{s.key==="Escape"&&o()},[o]);return L(()=>(document.addEventListener("keydown",r,!1),()=>{document.removeEventListener("keydown",r,!1)}),[r]),t?i("div",{class:It.settings_container,children:[i(fn,{onClick:o}),i(hn,{children:[i(pn,{onClick:o}),i($r,{}),i(Gr,{}),i(Or,{}),i(kr,{title:e.translate("settings.appearance"),children:[i(Br,{}),i(Vr,{}),i(qr,{})]}),i(Zr,{}),i(Xr,{})]})]}):i("button",{class:It.settings_toggle,onClick:o,children:i(Ar,{})})},yn=(e,t)=>{e?(document.body.style.backgroundImage=`url(${t(e)})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"):document.body.style.backgroundImage="none"},es=()=>{const e=Je(),{setStateSubkey:t,canResume:n,gameStart:o,gameResume:r,getAssetPath:s}=x(),c=T(),{title:l,author:u,cover:_,background:f}=c.metadata,a=P(()=>{t("game","background",null),t("game","background_page",null)},[t]),[p,d]=R(!1);L(()=>{(async()=>{const k=await n();d(!!k)})(),a(),yn(f,s)},[a,n,f,s]);const h=P(async()=>{a(),await o(),W("/game")},[a,o]),b=P(async()=>{a(),await r(),W("/game")},[a,r]),y=()=>W("/about");return i(Ee,{children:i(et,{children:[i(nt,{}),i(cr,{children:[_?i(dn,{src:s(_)}):"",i("h1",{children:l||e.translate("default.title")}),i("p",{children:u||e.translate("default.author")})]}),i(ye,{align:"end",children:[p?i(ge,{onClick:b,children:i(j,{id:"main.continue"})},"continuegame"):"",i(ge,{onClick:h,children:i(j,{id:"main.newgame"})},"startgame"),i(ge,{onClick:y,children:i(j,{id:"main.about"})},"about")]})]})})},ts="_error_modal_yytsh_1",ns="_error_message_yytsh_12",Rt={error_modal:ts,error_message:ns},os=()=>{const{atrament:e}=x(),t=T(),n=P(()=>e.state.setKey("ERROR",null),[e]),o=P(r=>{r.key==="Escape"&&n()},[n]);if(L(()=>(document.addEventListener("keydown",o,!1),()=>{document.removeEventListener("keydown",o,!1)}),[o]),t.ERROR)return i("div",{class:Rt.error_modal,children:[i(fn,{onClick:n}),i(hn,{children:[i(pn,{onClick:n}),i("p",{class:Rt.error_message,children:t.ERROR})]})]})},rs="_toolbar_y184t_1",ss={toolbar:rs},is="_inline_button_ws4x6_1",cs="_bordered_button_ws4x6_19",jt={inline_button:is,bordered_button:cs};function ce(e){const t=e.match(/(\w+)=["']?((?:.?(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?/g),n={};return t&&t.forEach(o=>{const[,r,s]=o.match(/(.+)=(.+)/);try{n[r]=JSON.parse(s)}catch{n[r]=s}}),n}function Ft(e,t){let n;try{n=e.ink.evaluateFunction(t,[],!0)}catch(o){e.ink.story().onError(o.toString())}return n}function Ht(e,t,n){e("OVERLAY","activeOverlay",t);let o=n;const r=n.split(`
`),c=r.shift().match(/\[title\](.+?)\[\/title\]/i);c&&(e("OVERLAY","title",c[1]),o=r.join(`
`)),e("OVERLAY","content",o)}const as=({children:e,options:t})=>{const{atrament:n,setStateSubkey:o}=x(),r=T(),s=P(()=>{const l=Ft(n,t.onclick);if(l.output)Ht(o,t.onclick,l.output);else{const u=r.OVERLAY.activeOverlay;if(u){const _=Ft(n,u);Ht(o,u,_.output)}}},[n,o,t.onclick,r]);let c=t.bordered===!1?jt.inline_button:jt.bordered_button;return i("button",{class:c,onClick:s,disabled:t.disabled,children:e})},ls={regexp:/\[button.+?\].+?\[\/button\]/ig,replacer:(e,t)=>{const n=e.match(/\[button(.+?)\](.+?)\[\/button\]/i);let o=n[1];o.startsWith("=")&&(o=`onclick${o}`);const r=ce(o);return i(as,{options:r,children:t(n[2])})}},us="_inline_image_1jlev_1",_s={inline_image:us},ds=({src:e})=>{const{getAssetPath:t}=x();return i("img",{class:_s.inline_image,src:t(e)})},fs={regexp:/\[img\].+?\[\/img\]/ig,replacer:e=>{console.log(e);const t=e.match(/\[img\](.+?)\[\/img\]/i);return i(ds,{src:t[1]})}},hs="_inline_link_1di4e_1",ps={inline_link:hs},gs=({children:e,choice:t})=>{const{atrament:n,makeChoice:o,continueStory:r}=x(),s=T(),c=P(()=>{const l=s.scenes.length-1,_=s.scenes[l].choices.findIndex(f=>f.choice===t);if(_<0){n.state.setKey("ERROR",`[link=${t}] leads to nonexistent choice!`);return}o(_),r()},[n,r,o,t,s]);return i("a",{href:"#",class:ps.inline_link,onClick:c,children:e})},ms={regexp:/\[link=.+?\].+?\[\/link\]/ig,replacer:(e,t)=>{const n=e.match(/\[link=(.+?)\](.+?)\[\/link\]/i);return i(gs,{choice:n[1],children:t(n[2])})}},vs="_progress_frame_17ofj_1",ys="_progress_bar_17ofj_7",bs="_standard_17ofj_14",ks="_accent_17ofj_18",ws="_progress_content_17ofj_22",J={progress_frame:vs,progress_bar:ys,standard:bs,accent:ks,progress_content:ws},Ss=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let s=r?(r-n)*100/(o-n):0;s>100&&(s=100),s<0&&(s=0);const c=[J.progress_bar];return e.style==="accent"?c.push(J.accent):c.push(J.standard),i("div",{class:J.progress_frame,children:[i("div",{class:c.join(" "),style:{width:`${s}%`}}),i("div",{class:J.progress_content,children:[t," "]})]})},$s={regexp:/\[progress.+?\].*?\[\/progress\]/ig,replacer:(e,t)=>{const n=e.match(/\[progress(.+?)\](.*?)\[\/progress\]/i),o=ce(n[1]);return i(Ss,{options:o,children:t(n[2])})}},Es="_input_1c260_1",xs={input:Es};function Cs(e,t,n){try{e.ink.setVariable(t,n)}catch(o){e.ink.story().onError(o.toString())}}function Ps(e,t){let n;try{n=e.ink.getVariable(t)}catch(o){e.ink.story().onError(o.toString())}return n}const As=({inactive:e,options:t})=>{const[n,o]=R(null),{atrament:r}=x();L(()=>o(Ps(r,t.var)),[r,t.var]);const s=l=>{let u=l.srcElement.value||n;t.type==="number"&&(u=+u),Cs(r,t.var,u),o(u)},c=t.type==="number"?"number":"text";return i("input",{disabled:e,class:xs.input,value:n,placeholder:t.placeholder,type:c,onInput:s})},Ls={regexp:/\[input.+?\]/ig,replacer:(e,t,n)=>{const o=e.match(/\[input(.+?)\]/i),r=ce(o[1]);return i(As,{inactive:n,options:r})}},Ts="_hidden_1ydvn_1",Is="_revealed_1ydvn_12",Mt={hidden:Ts,revealed:Is},Os=[Mt.hidden,Mt.revealed],Rs=({children:e})=>{const[t,n]=R(0);return i("span",{class:Os[t],onClick:()=>n(1-t),children:i("span",{children:e})})},js={regexp:/\[spoiler\].*?\[\/spoiler\]/ig,replacer:(e,t)=>{const n=e.match(/\[spoiler\](.*?)\[\/spoiler\]/i);return i(Rs,{children:t(n[1])})}},Fs="_infoblock_10o9f_1",Hs="_font_ui_10o9f_9",Ms="_side_highlight_10o9f_13",Vs="_side_accent_10o9f_17",_e={infoblock:Fs,font_ui:Hs,side_highlight:Ms,side_accent:Vs},zs=({children:e,options:t})=>{const n=[_e.infoblock];return t.font==="system"&&n.push(_e.font_ui),t.side&&(t.side==="accent"?n.push(_e.side_accent):n.push(_e.side_highlight)),i("div",{class:n.join(" "),children:e})},Ds={regexp:/\[info.*?\].*?\[\/info\]/ig,replacer:(e,t)=>{const n=e.match(/\[info(.*?)\](.*?)\[\/info\]/i),o=ce(n[1]);return i(zs,{options:o,children:t(n[2])})}},Bs="_bannerblock_1ry2a_1",Us="_accent_1ry2a_11",Ns="_allcaps_1ry2a_17",Le={bannerblock:Bs,accent:Us,allcaps:Ns},Ws=({children:e,options:t})=>{const n=[Le.bannerblock];return t.style==="accent"&&n.push(Le.accent),t.allcaps&&n.push(Le.allcaps),i("div",{class:n.join(" "),children:e})},qs={regexp:/\[banner.*?\].*?\[\/banner\]/ig,replacer:(e,t)=>{const n=e.match(/\[banner(.*?)\](.*?)\[\/banner\]/i),o=ce(n[1]);return i(Ws,{options:o,children:t(n[2])})}},Gs=[ls,fs,ms,$s,Ls,js,Ds,qs],Ys=e=>/<\/?[a-z][\s\S]*>/i.test(e);function Ks(e,t,n,o){let r=e;if(typeof e!="string")return r;const s=e.split(t),c=e.match(t);return c&&(r=s.flatMap((l,u)=>u<c.length?[l,n(c[u],_=>ae(_,o),o)]:[l])),r}function ae(e,t){let n=[e];return Gs.forEach(o=>{n=n.flatMap(r=>Ks(r,o.regexp,o.replacer,t))}),n.filter(o=>o).map((o,r)=>typeof o=="string"&&Ys(o)?i("span",{dangerouslySetInnerHTML:{__html:o}},r):o)}const Xs=()=>{const e=Je(),{atrament:t}=x(),n=T(),[o,r]=R(!1);let s=n.metadata.title||e.translate("default.title");if(n.metadata.toolbar&&!o)try{const l=t.ink.evaluateFunction(n.metadata.toolbar,[],!0);l.output&&(s=l.output)}catch(l){t.ink.story().onError(l.toString()),r(!0)}const c=ae(s);return i("div",{class:[ss.toolbar,"atrament-toolbar"].join(" "),children:c})},Js="_container_text_z4l34_1",Qs={container_text:Js},ot=({children:e,fontSize:t})=>i("div",{class:[Qs.container_text,"atrament-text-container"].join(" "),style:{"font-size":`${t}%`},children:e}),Zs="_container_scenes_13lih_1",ei={container_scenes:Zs},ti=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",ni=({children:e,align:t})=>i("div",{class:[ei.container_scenes,"atrament-container-scene"].join(" "),style:{"justify-content":ti(t)},children:e}),oi="_container_choices_41rpm_1",ri={container_choices:oi},si=({children:e,key:t,isReady:n})=>i("div",{class:[ri.container_choices,"atrament-container-choices",n?"animation_appear":""].join(" "),children:i("div",{style:{opacity:n?1:0},children:i(ye,{children:e})})},t),ii="_scene_1or5e_1",ci={scene:ii},bn=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function ai(e,t){this.scrollLeft=e,this.scrollTop=t}const kn=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,wn=(e,t,n)=>kn(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),Vt=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},li=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},rt=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function ui(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const _i=e=>.5*(1-Math.cos(Math.PI*e));function st(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),st=t,t()}const di=500,Sn=e=>{const n=(st()-e.timeStamp)/(e.duration||di);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||_i)(n),r=e.startX+(e.targetX-e.startX)*o,s=e.startY+(e.targetY-e.startY)*o;e.method(r,s),e.rafId=window.requestAnimationFrame(()=>{Sn(e)})},be=e=>isFinite(e)?Number(e):0,fi=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},hi=(e,t,n)=>{var o,r;if(!fi(e))return;const s=e.scrollLeft,c=e.scrollTop,l=be((o=t.left)!==null&&o!==void 0?o:s),u=be((r=t.top)!==null&&r!==void 0?r:c);if(l===s&&u===c)return;const _=Vt(HTMLElement.prototype,"scroll",ai),f=Vt(Object.getPrototypeOf(e),"scroll",_).bind(e);if(t.behavior!=="smooth"){f(l,u);return}const a=()=>{window.removeEventListener("wheel",h),window.removeEventListener("touchmove",h)},p=()=>{a();const b=e.nodeType===9;e.dispatchEvent(ui(b))},d=Object.assign(Object.assign({},n),{timeStamp:st(),startX:s,startY:c,targetX:l,targetY:u,rafId:0,method:f,callback:p}),h=()=>{window.cancelAnimationFrame(d.rafId),a()};window.addEventListener("wheel",h,{passive:!0,once:!0}),window.addEventListener("touchmove",h,{passive:!0,once:!0}),Sn(d)},pi=e=>e.window===e,gi=e=>(t,n,o)=>{const[r,s]=pi(t)?[rt(t.document.documentElement),"Window"]:[t,"Element"],c=n??{};if(!li(c))throw new TypeError(kn(e,s));if(!bn(c.behavior))throw new TypeError(wn(e,s,c.behavior));e==="scrollBy"&&(c.left=be(c.left)+r.scrollLeft,c.top=be(c.top)+r.scrollTop),hi(r,c,o)},mi=gi("scroll"),vi=mi,$n=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},En=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},yi=e=>(En($n(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,bi=(e,t,n)=>{const[o,r,s]=En(t,n,e.block||"start",e.inline||"nearest");return[r,s].map((c,l)=>{switch(c){case"center":return 1;case"nearest":return 0;default:{const u=o>>l&1;return c==="start"==!u?2:3}}})},zt=(e,t,n,o,r,s,c)=>e!==0?e:r<t&&s>n||r>t&&s<n?null:r<=t&&c<=o||s>=n&&c>=o?2:s>n&&c<o||r<t&&c>o?3:null,Dt=e=>e!=="visible"&&e!=="clip",ki=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},wi=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?Dt(t.overflowY)||Dt(t.overflowX)||e===rt(e):!1,Bt=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return ki(e)}return n},Te=(e,t,n)=>e<t?t:e>n?n:e,Si=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],$i=(e,t,n)=>{const{top:o,right:r,bottom:s,left:c}=t,l=Si(e.ownerDocument);if(!l)return[o,r,s,c];const u=_=>{const f=n.getPropertyValue(`${l}-${_}`);return parseInt(f,10)||0};return[o-u("top"),r+u("right"),s+u("bottom"),c-u("left")]},de=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},Ei=(e,t)=>{var n,o,r;const s=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[c,l,u,_]=e===rt(e)?[0,0,(o=s==null?void 0:s.width)!==null&&o!==void 0?o:e.clientWidth,(r=s==null?void 0:s.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],f=c+e.clientLeft,a=l+e.clientTop,p=f+u,d=a+_;return[a,p,d,f]},xi=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const s=window.getComputedStyle(e),c=s.direction!=="rtl",l=$n(s.writingMode||s.getPropertyValue("-webkit-writing-mode")||s.getPropertyValue("-ms-writing-mode")),[u,_]=bi(t,l,c);let[f,a,p,d]=$i(e,e.getBoundingClientRect(),s);for(let h=Bt(e);h!==null;h=Bt(h)){if(o!==h.ownerDocument){if(o=h.ownerDocument,r=o.defaultView,!r)break;const{left:it,top:ct}=h.getBoundingClientRect();f+=ct,a+=it,p+=ct,d+=it}const b=r.getComputedStyle(h);if(b.position==="fixed")break;if(!wi(h,b))continue;const y=h.getBoundingClientRect(),[m,k,g,v]=Ei(h,y),$=zt(u,v,k,h.clientWidth,d,a,a-d),C=zt(_,m,g,h.clientHeight,f,p,p-f),I=$===null?0:de($,d,a)-de($,v,k),X=C===null?0:de(C,f,p)-de(C,m,g),A=yi(b)?Te(I,-h.scrollWidth+h.clientWidth-h.scrollLeft,-h.scrollLeft):Te(I,-h.scrollLeft,h.scrollWidth-h.clientWidth-h.scrollLeft),V=Te(X,-h.scrollTop,h.scrollHeight-h.clientHeight-h.scrollTop);n.push([h,{left:h.scrollLeft+A,top:h.scrollTop+V,behavior:t.behavior}]),f=Math.max(f-V,m),a=Math.min(a-A,k),p=Math.min(p-V,g),d=Math.max(d-A,v)}return n},Ci=(e,t,n)=>{const o=t||{};if(!bn(o.behavior))throw new TypeError(wn("scrollIntoView","Element",o.behavior));xi(e,o).forEach(([s,c])=>{vi(s,c,n)})},Pi=({content:e,isCurrent:t})=>{if(e.text===`
`)return i(H,{});let n;t||(n={opacity:"70%"});let o=e.tags.CLASS;return Array.isArray(o)&&(o=o.join(" ")),i("p",{style:n,class:o,children:ae(e.text,!t)})};function Ai(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{const s=new Image;s.onload=r,s.onerror=r,s.src=e(o)}));return Promise.allSettled(n)}const Li=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const{getAssetPath:r}=x(),[s,c]=R(!1),l=Hn(null),u=P(_=>{o(!0),setTimeout(()=>{Ci(l.current,{behavior:_,block:"start"},{duration:300})},100)},[o]);return L(()=>{s&&t&&u(n?"instant":"smooth")},[s,t,n,u]),L(()=>{(async()=>{await Ai(r,e.images),c(!0)})()},[e,c,r]),i("div",{class:[ci.scene,"atrament-scene",t&&s?"animation_appear":""].join(" "),ref:l,children:i("div",{style:{opacity:s?1:0},children:e.content.map((_,f)=>i(H,{children:[_.image&&i(dn,{src:r(_.image)}),i(Pi,{isCurrent:t,content:_})]},`paragraph-${e.uuid}-${f}`))})})},Ti="_choice_button_1tj3k_1",Ii="_choice_active_1tj3k_20",Oi="_choice_inactive_1tj3k_44",Ri="_disappear_1tj3k_1",Ie={choice_button:Ti,choice_active:Ii,choice_inactive:Oi,disappear:Ri},ji=({choice:e,chosen:t,handleClick:n})=>{const o=t!==null,r=t===e.id,s=()=>{o||n(e.id)},c=o?r?Ie.choice_active:Ie.choice_inactive:"";let l=e.tags.CLASS;return Array.isArray(l)&&(l=l.join(" ")),i("button",{class:`${Ie.choice_button} ${c} ${l}`,onClick:s,disabled:e.disabled,children:ae(e.choice)})},Fi=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:r}=x(),[s,c]=R(null),l=t&&t.choices?t.choices.length:-1,u=P(f=>{const a=l>1?350:150;c(f),setTimeout(()=>{setTimeout(()=>{c(null),n(!1),o(f),r()},a)},0)},[o,r,n,l]),_=P(f=>{const a=+f.key;f.target.tagName.toLowerCase()!=="input"&&l>0&&a>0&&a<=l&&!t.choices[a-1].disabled&&u(a-1)},[l,u,t.choices]);return L(()=>(document.addEventListener("keydown",_,!1),()=>{document.removeEventListener("keydown",_,!1)}),[_]),i(H,{children:t.choices.map((f,a)=>i(ji,{choice:f,chosen:s,handleClick:u},`${e}-${a}`))})},Hi=()=>{const{atrament:e}=x();return i(vn,{onClick:async()=>{await e.game.removeSave(),W("/")},children:i(j,{id:"game.end"})})},Mi=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const r=t&&t.choices?t.choices.length:-1;if(r===0)return i(Hi,{});if(r>=0&&!o)return i(Fi,{currentScene:t,setReady:n},e)},Vi=()=>{var c;const e=T(),[t,n]=R(!1),o=e.scenes.length-1,r=!!e.metadata.hypertext,s=`choices-${(c=e.scenes[o])==null?void 0:c.uuid}`;return i(ot,{fontSize:e.settings.fontSize,children:[i(ni,{align:e.metadata.scenes_align,children:e.scenes.map((l,u)=>i(Li,{scene:l,isCurrent:u===o,isSingle:o===0,readyHandler:n},l.uuid))}),i(si,{isReady:t,children:i(Mi,{currentScene:e.scenes[o],setReady:n,isHypertextMode:r},s)},s)]})},zi="_overlay_container_1lt26_1",Di="_overlay_header_1lt26_11",Bi="_overlay_title_1lt26_24",Ui="_overlay_content_1lt26_33",Ni="_button_back_1lt26_48",Q={overlay_container:zi,overlay_header:Di,overlay_title:Bi,overlay_content:Ui,button_back:Ni},Wi=()=>{const{setStateSubkey:e}=x(),t=T(),n=P(()=>{e("OVERLAY","activeOverlay",null),e("OVERLAY","content","")},[e]);if(!t.OVERLAY.activeOverlay)return i(H,{});const o=t.OVERLAY.content.split(`
`),r=t.OVERLAY.title;return i("div",{class:Q.overlay_container,children:[i("div",{class:Q.overlay_header,children:[i("button",{class:Q.button_back,onClick:n,children:i(Ir,{})}),r&&i("div",{class:Q.overlay_title,children:r})]}),i("div",{class:[Q.overlay_content,"atrament-overlay"].join(" "),children:i(ot,{fontSize:t.settings.fontSize,children:o.map((s,c)=>i("p",{children:ae(s)},c))})})]})},qi=()=>{const{continueStory:e,getAssetPath:t}=x(),n=T();L(()=>{e()},[e]);let o;n.game.background&&(o={"background-image":`url(${t(n.game.background)})`,"background-size":"cover","background-position":"center"});const r=n.game.background_page;return L(()=>{yn(r,t)},[r,t]),i(Ee,{style:o,children:[i(nt,{}),i(os,{}),i(Xs,{}),i(Wi,{}),i(Vi,{})]})},Gi=()=>{const e=T(),t=()=>W("/");return i(Ee,{children:[i(nt,{}),i(ot,{fontSize:e.settings.fontSize,children:[i(et,{children:i(ye,{children:[i("img",{src:"logo.png",style:{margin:"auto",display:"block",width:"50%"}}),i("h1",{style:{"text-align":"center"},children:"Atrament UI"}),i("p",{children:"Web UI for Ink games, made with:"}),i("ul",{children:[i("li",{children:i("a",{href:"https://github.com/technix/atrament-core",target:"_blank",rel:"noreferrer",children:"Atrament"})}),i("li",{children:i("a",{href:"https://github.com/y-lohse/inkjs",target:"_blank",rel:"noreferrer",children:"InkJS"})}),i("li",{children:i("a",{href:"https://preactjs.com/",target:"_blank",rel:"noreferrer",children:"Preact"})}),i("li",{children:i("a",{href:"https://howlerjs.com/",target:"_blank",rel:"noreferrer",children:"Howler"})}),i("li",{children:i("a",{href:"https://github.com/nanostores/nanostores",target:"_blank",rel:"noreferrer",children:"Nanostores"})}),i("li",{children:i("a",{href:"https://github.com/localForage/localForage",target:"_blank",rel:"noreferrer",children:"localForage"})}),i("li",{children:i("a",{href:"https://github.com/101arrowz/fflate",target:"_blank",rel:"noreferrer",children:"fflate"})})]})]})}),i(ye,{children:i(ge,{onClick:t,children:i(j,{id:"main.menu"})},"mainmenu")})]})]})},Yi=[{language:"en",messages:{"default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.continue":"Continue","main.about":"About","game.end":"The end","game.save-and-quit":"Save game and quit","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","settings.appearance":"Appearance","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz."}},{language:"ua",messages:{"default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.continue":"Продовжити","main.about":"Про застосунок","game.end":"Кінець","game.save-and-quit":"Зберегти гру та вийти","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","settings.appearance":"Вигляд","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб."}}];let fe;function Ki(){const[e,t]=R(!1);L(()=>{(async()=>{fe=(await dt(()=>import("./index-BKRnBoWm.js"),[],import.meta.url)).default;const{Story:s}=await dt(async()=>{const{Story:c}=await import("./ink-CADOJafZ.js");return{Story:c}},[],import.meta.url);await To(fe,s),t(!0)})()},[]);const n=P(o=>{o.url==="/"&&o.previous&&fe.game.clear()},[]);return e?i(oo,{language:fo,locales:Yi,children:i(Qe.Provider,{value:fe,children:i(At,{children:i(rn,{history:Xn(),onChange:n,children:[i(es,{path:"/"}),i(qi,{path:"/game"}),i(Gi,{path:"/about"})]})})})}):i(At,{children:i(Jo,{})})}Tn(i(Ki,{}),document.getElementById("app"));
