(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var ce,w,Dt,W,at,Bt,Re,qe,Fe,je,Ut,oe={},Wt=[],xn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,be=Array.isArray;function M(e,t){for(var n in t)e[n]=t[n];return e}function Nt(e){var t=e.parentNode;t&&t.removeChild(e)}function re(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?ce.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return te(e,c,o,r,null)}function te(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++Dt,__i:-1,__u:0};return r==null&&w.vnode!=null&&w.vnode(s),s}function j(e){return e.children}function ne(e,t){this.props=e,this.context=t}function Y(e,t){if(t==null)return e.__?Y(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Y(e):null}function qt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return qt(e)}}function He(e){(!e.__d&&(e.__d=!0)&&W.push(e)&&!ge.__r++||at!==w.debounceRendering)&&((at=w.debounceRendering)||Bt)(ge)}function ge(){var e,t,n,o,r,s,c,a;for(W.sort(Re);e=W.shift();)e.__d&&(t=W.length,o=void 0,s=(r=(n=e).__v).__e,c=[],a=[],n.__P&&((o=M({},r)).__v=r.__v+1,w.vnode&&w.vnode(o),Ye(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[s]:null,c,s??Y(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,Kt(c,o,a),o.__e!=s&&qt(o)),W.length>t&&W.sort(Re));ge.__r=0}function Yt(e,t,n,o,r,s,c,a,u,_,d){var l,p,f,h,k,b=o&&o.__k||Wt,m=t.length;for(n.__d=u,Cn(n,t,b),u=n.__d,l=0;l<m;l++)(f=n.__k[l])!=null&&typeof f!="boolean"&&typeof f!="function"&&(p=f.__i===-1?oe:b[f.__i]||oe,f.__i=l,Ye(e,f,p,r,s,c,a,u,_,d),h=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Ge(p.ref,null,f),d.push(f.ref,f.__c||h,f)),k==null&&h!=null&&(k=h),65536&f.__u||p.__k===f.__k?u=Gt(f,u,e):typeof f.type=="function"&&f.__d!==void 0?u=f.__d:h&&(u=h.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=u,n.__e=k}function Cn(e,t,n){var o,r,s,c,a,u=t.length,_=n.length,d=_,l=0;for(e.__k=[],o=0;o<u;o++)c=o+l,(r=e.__k[o]=(r=t[o])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?te(null,r,null,null,null):be(r)?te(j,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?te(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=e,r.__b=e.__b+1,a=An(r,n,c,d),r.__i=a,s=null,a!==-1&&(d--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&l--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?l=a-c:a==c+1?l++:a>c?d>u-c?l+=a-c:l--:a<c&&l++,a!==o+l&&(r.__u|=65536))):(s=n[c])&&s.key==null&&s.__e&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=Y(s)),Ve(s,s,!1),n[c]=null,d--);if(d)for(o=0;o<_;o++)(s=n[o])!=null&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=Y(s)),Ve(s,s))}function Gt(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=Gt(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Y(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Me(e,t){return t=t||[],e==null||typeof e=="boolean"||(be(e)?e.some(function(n){Me(n,t)}):t.push(e)),t}function An(e,t,n,o){var r=e.key,s=e.type,c=n-1,a=n+1,u=t[n];if(u===null||u&&r==u.key&&s===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<t.length;){if(c>=0){if((u=t[c])&&!(131072&u.__u)&&r==u.key&&s===u.type)return c;c--}if(a<t.length){if((u=t[a])&&!(131072&u.__u)&&r==u.key&&s===u.type)return a;a++}}return-1}function lt(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||xn.test(t)?n:n+"px"}function le(e,t,n,o,r){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||lt(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||lt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=qe,e.addEventListener(t,s?je:Fe,s)):e.removeEventListener(t,s?je:Fe,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ut(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=qe++;else if(t.t<n.u)return;return n(w.event?w.event(t):t)}}}function Ye(e,t,n,o,r,s,c,a,u,_){var d,l,p,f,h,k,b,m,y,g,v,A,E,R,G,D,P=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),s=[a=t.__e=n.__e]),(d=w.__b)&&d(t);e:if(typeof P=="function")try{if(m=t.props,y="prototype"in P&&P.prototype.render,g=(d=P.contextType)&&o[d.__c],v=d?g?g.props.value:d.__:o,n.__c?b=(l=t.__c=n.__c).__=l.__E:(y?t.__c=l=new P(m,v):(t.__c=l=new ne(m,v),l.constructor=P,l.render=Ln),g&&g.sub(l),l.props=m,l.state||(l.state={}),l.context=v,l.__n=o,p=l.__d=!0,l.__h=[],l._sb=[]),y&&l.__s==null&&(l.__s=l.state),y&&P.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=M({},l.__s)),M(l.__s,P.getDerivedStateFromProps(m,l.__s))),f=l.props,h=l.state,l.__v=t,p)y&&P.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),y&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(y&&P.getDerivedStateFromProps==null&&m!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(m,v),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(m,l.__s,v)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=m,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(B){B&&(B.__=t)}),A=0;A<l._sb.length;A++)l.__h.push(l._sb[A]);l._sb=[],l.__h.length&&c.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(m,l.__s,v),y&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,h,k)})}if(l.context=v,l.props=m,l.__P=e,l.__e=!1,E=w.__r,R=0,y){for(l.state=l.__s,l.__d=!1,E&&E(t),d=l.render(l.props,l.state,l.context),G=0;G<l._sb.length;G++)l.__h.push(l._sb[G]);l._sb=[]}else do l.__d=!1,E&&E(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++R<25);l.state=l.__s,l.getChildContext!=null&&(o=M(M({},o),l.getChildContext())),y&&!p&&l.getSnapshotBeforeUpdate!=null&&(k=l.getSnapshotBeforeUpdate(f,h)),Yt(e,be(D=d!=null&&d.type===j&&d.key==null?d.props.children:d)?D:[D],t,n,o,r,s,c,a,u,_),l.base=t.__e,t.__u&=-161,l.__h.length&&c.push(l),b&&(l.__E=l.__=null)}catch(B){if(t.__v=null,u||s!=null){for(t.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,t.__e=a}else t.__e=n.__e,t.__k=n.__k;w.__e(B,t,n)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Pn(n.__e,t,n,o,r,s,c,u,_);(d=w.diffed)&&d(t)}function Kt(e,t,n){t.__d=void 0;for(var o=0;o<n.length;o++)Ge(n[o],n[++o],n[++o]);w.__c&&w.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){w.__e(s,r.__v)}})}function Pn(e,t,n,o,r,s,c,a,u){var _,d,l,p,f,h,k,b=n.props,m=t.props,y=t.type;if(y==="svg"?r="http://www.w3.org/2000/svg":y==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(_=0;_<s.length;_++)if((f=s[_])&&"setAttribute"in f==!!y&&(y?f.localName===y:f.nodeType===3)){e=f,s[_]=null;break}}if(e==null){if(y===null)return document.createTextNode(m);e=document.createElementNS(r,y,m.is&&m),s=null,a=!1}if(y===null)b===m||a&&e.data===m||(e.data=m);else{if(s=s&&ce.call(e.childNodes),b=n.props||oe,!a&&s!=null)for(b={},_=0;_<e.attributes.length;_++)b[(f=e.attributes[_]).name]=f.value;for(_ in b)if(f=b[_],_!="children"){if(_=="dangerouslySetInnerHTML")l=f;else if(_!=="key"&&!(_ in m)){if(_=="value"&&"defaultValue"in m||_=="checked"&&"defaultChecked"in m)continue;le(e,_,null,f,r)}}for(_ in m)f=m[_],_=="children"?p=f:_=="dangerouslySetInnerHTML"?d=f:_=="value"?h=f:_=="checked"?k=f:_==="key"||a&&typeof f!="function"||b[_]===f||le(e,_,f,b[_],r);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),Yt(e,be(p)?p:[p],t,n,o,y==="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&Y(n,0),a,u),s!=null)for(_=s.length;_--;)s[_]!=null&&Nt(s[_]);a||(_="value",h!==void 0&&(h!==e[_]||y==="progress"&&!h||y==="option"&&h!==b[_])&&le(e,_,h,b[_],r),_="checked",k!==void 0&&k!==e[_]&&le(e,_,k,b[_],r))}return e}function Ge(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){w.__e(r,n)}}function Ve(e,t,n){var o,r;if(w.unmount&&w.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Ge(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){w.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Ve(o[r],t,n||typeof e.type!="function");n||e.__e==null||Nt(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Ln(e,t,n){return this.constructor(e,n)}function Tn(e,t,n){var o,r,s,c;w.__&&w.__(e,t),r=(o=typeof n=="function")?null:t.__k,s=[],c=[],Ye(t,e=(!o&&n||t).__k=re(j,null,[e]),r||oe,oe,t.namespaceURI,!o&&n?[n]:r?null:t.firstChild?ce.call(t.childNodes):null,s,!o&&n?n:r?r.__e:t.firstChild,o,c),Kt(s,e,c)}function In(e,t,n){var o,r,s,c,a=M({},e.props);for(s in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)s=="key"?o=t[s]:s=="ref"?r=t[s]:a[s]=t[s]===void 0&&c!==void 0?c[s]:t[s];return arguments.length>2&&(a.children=arguments.length>3?ce.call(arguments,2):n),te(e.type,a,o||e.key,r||e.ref,null)}function ke(e,t){var n={__c:t="__cC"+Ut++,__:e,Consumer:function(o,r){return o.children(r)},Provider:function(o){var r,s;return this.getChildContext||(r=[],(s={})[t]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&r.some(function(a){a.__e=!0,He(a)})},this.sub=function(c){r.push(c);var a=c.componentWillUnmount;c.componentWillUnmount=function(){r&&r.splice(r.indexOf(c),1),a&&a.call(c)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}ce=Wt.slice,w={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(a){e=a}throw e}},Dt=0,ne.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=M({},this.state),typeof e=="function"&&(e=e(M({},n),this.props)),e&&M(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),He(this))},ne.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),He(this))},ne.prototype.render=j,W=[],Bt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Re=function(e,t){return e.__v.__b-t.__v.__b},ge.__r=0,qe=0,Fe=ut(!1),je=ut(!0),Ut=0;var On=0;function i(e,t,n,o,r,s){t||(t={});var c,a,u=t;if("ref"in u)for(a in u={},t)a=="ref"?c=t[a]:u[a]=t[a];var _={type:e,props:u,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--On,__i:-1,__u:0,__source:r,__self:s};if(typeof e=="function"&&(c=e.defaultProps))for(a in c)u[a]===void 0&&(u[a]=c[a]);return w.vnode&&w.vnode(_),_}const Rn="modulepreload",Fn=function(e,t){return e[0]==="."?new URL(e,t).href:e},_t={},dt=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),a=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=Promise.all(n.map(u=>{if(u=Fn(u,o),u in _t)return;_t[u]=!0;const _=u.endsWith(".css"),d=_?'[rel="stylesheet"]':"";if(!!o)for(let f=s.length-1;f>=0;f--){const h=s[f];if(h.href===u&&(!_||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=_?"stylesheet":Rn,_||(p.as="script",p.crossOrigin=""),p.href=u,a&&p.setAttribute("nonce",a),document.head.appendChild(p),_)return new Promise((f,h)=>{p.addEventListener("load",f),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}return r.then(()=>t()).catch(s=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s})};var J,S,Ce,ft,se=0,Xt=[],x=w,ht=x.__b,pt=x.__r,gt=x.diffed,mt=x.__c,vt=x.unmount,yt=x.__;function we(e,t){x.__h&&x.__h(S,e,se||t),se=0;var n=S.__H||(S.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function I(e){return se=1,jn(Qt,e)}function jn(e,t,n){var o=we(J++,2);if(o.t=e,!o.__c&&(o.__=[Qt(void 0,t),function(a){var u=o.__N?o.__N[0]:o.__[0],_=o.t(u,a);u!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=S,!S.u)){var r=function(a,u,_){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(p){return!!p.__c});if(d.every(function(p){return!p.__N}))return!s||s.call(this,a,u,_);var l=!1;return d.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(l=!0)}}),!(!l&&o.__c.props===a)&&(!s||s.call(this,a,u,_))};S.u=!0;var s=S.shouldComponentUpdate,c=S.componentWillUpdate;S.componentWillUpdate=function(a,u,_){if(this.__e){var d=s;s=void 0,r(a,u,_),s=d}c&&c.call(this,a,u,_)},S.shouldComponentUpdate=r}return o.__N||o.__}function L(e,t){var n=we(J++,3);!x.__s&&Jt(n.__H,t)&&(n.__=e,n.i=t,S.__H.__h.push(n))}function Hn(e){return se=5,Ke(function(){return{current:e}},[])}function Ke(e,t){var n=we(J++,7);return Jt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function $(e,t){return se=8,Ke(function(){return e},t)}function ae(e){var t=S.context[e.__c],n=we(J++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(S)),t.props.value):e.__}function Mn(){for(var e;e=Xt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(he),e.__H.__h.forEach(ze),e.__H.__h=[]}catch(t){e.__H.__h=[],x.__e(t,e.__v)}}x.__b=function(e){S=null,ht&&ht(e)},x.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),yt&&yt(e,t)},x.__r=function(e){pt&&pt(e),J=0;var t=(S=e.__c).__H;t&&(Ce===S?(t.__h=[],S.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(he),t.__h.forEach(ze),t.__h=[],J=0)),Ce=S},x.diffed=function(e){gt&&gt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Xt.push(t)!==1&&ft===x.requestAnimationFrame||((ft=x.requestAnimationFrame)||Vn)(Mn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Ce=S=null},x.__c=function(e,t){t.some(function(n){try{n.__h.forEach(he),n.__h=n.__h.filter(function(o){return!o.__||ze(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],x.__e(o,n.__v)}}),mt&&mt(e,t)},x.unmount=function(e){vt&&vt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{he(o)}catch(r){t=r}}),n.__H=void 0,t&&x.__e(t,n.__v))};var bt=typeof requestAnimationFrame=="function";function Vn(e){var t,n=function(){clearTimeout(o),bt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);bt&&(t=requestAnimationFrame(n))}function he(e){var t=S,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),S=t}function ze(e){var t=S;e.__c=e.__(),S=t}function Jt(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Qt(e,t){return typeof t=="function"?t(e):t}var zn={};function ue(e,t){for(var n in t)e[n]=t[n];return e}function Dn(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,s=e.match(r),c={};if(s&&s[1])for(var a=s[1].split("&"),u=0;u<a.length;u++){var _=a[u].split("=");c[decodeURIComponent(_[0])]=decodeURIComponent(_.slice(1).join("="))}e=De(e.replace(r,"")),t=De(t||"");for(var d=Math.max(e.length,t.length),l=0;l<d;l++)if(t[l]&&t[l].charAt(0)===":"){var p=t[l].replace(/(^:|[+*?]+$)/g,""),f=(t[l].match(/[+*?]+$/)||zn)[0]||"",h=~f.indexOf("+"),k=~f.indexOf("*"),b=e[l]||"";if(!b&&!k&&(f.indexOf("?")<0||h)){o=!1;break}if(c[p]=decodeURIComponent(b),h||k){c[p]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(t[l]!==e[l]){o=!1;break}return(n.default===!0||o!==!1)&&c}function Bn(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function Un(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:De(n.props.path).map(Wn).join("")}(e),e.props}function De(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Wn(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Nn={},N=[],kt=[],T=null,Zt={url:Xe()},qn=ke(Zt);function Xe(){var e;return""+((e=T&&T.location?T.location:T&&T.getCurrentLocation?T.getCurrentLocation():typeof location<"u"?location:Nn).pathname||"")+(e.search||"")}function q(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var o=N.length;o--;)if(N[o].canRoute(n))return!0;return!1}(e)&&function(n,o){o===void 0&&(o="push"),T&&T[o]?T[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)}(e,t?"replace":"push"),en(e)}function en(e){for(var t=!1,n=0;n<N.length;n++)N[n].routeTo(e)&&(t=!0);return t}function Yn(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return q(t)}}function Gn(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Kn(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Yn(t))return Gn(e)}while(t=t.parentNode)}}var wt=!1;function tn(e){e.history&&(T=e.history),this.state={url:e.url||Xe()}}ue(tn.prototype=new ne,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=Me(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;wt||(wt=!0,T||addEventListener("popstate",function(){en(Xe())}),addEventListener("click",Kn)),N.push(this),T&&(this.u=T.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),N.splice(N.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(Un).sort(Bn);for(var n=0;n<e.length;n++){var o=e[n],r=Dn(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,s=t.url,c=this.c,a=this.g(Me(e.children),s);if(a&&(o=In(a[0],ue(ue({url:s,matches:n=a[1]},n),{key:void 0,ref:void 0}))),s!==(c&&c.url)){ue(Zt,c=this.c={url:s,previous:c&&c.url,current:o,path:o?o.props.path:null,matches:n}),c.router=this,c.active=o?[o]:[];for(var u=kt.length;u--;)kt[u]({});typeof r=="function"&&r(c)}return re(qn.Provider,{value:c},o)}});function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},me.apply(null,arguments)}var X;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(X||(X={}));var St=function(e){return e};function Xn(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,s=o.map(function(g){var v=St(me({pathname:"/",search:"",hash:"",state:null,key:xt()},typeof g=="string"?Ct(g):g));return v}),c=$t(r??s.length-1,0,s.length-1),a=X.Pop,u=s[c],_=Et(),d=Et();function l(g){return typeof g=="string"?g:Jn(g)}function p(g,v){return v===void 0&&(v=null),St(me({pathname:u.pathname,search:"",hash:""},typeof g=="string"?Ct(g):g,{state:v,key:xt()}))}function f(g,v,A){return!d.length||(d.call({action:g,location:v,retry:A}),!1)}function h(g,v){a=g,u=v,_.call({action:a,location:u})}function k(g,v){var A=X.Push,E=p(g,v);function R(){k(g,v)}f(A,E,R)&&(c+=1,s.splice(c,s.length,E),h(A,E))}function b(g,v){var A=X.Replace,E=p(g,v);function R(){b(g,v)}f(A,E,R)&&(s[c]=E,h(A,E))}function m(g){var v=$t(c+g,0,s.length-1),A=X.Pop,E=s[v];function R(){m(g)}f(A,E,R)&&(c=v,h(A,E))}var y={get index(){return c},get action(){return a},get location(){return u},createHref:l,push:k,replace:b,go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(v){return _.push(v)},block:function(v){return d.push(v)}};return y}function $t(e,t,n){return Math.min(Math.max(e,t),n)}function Et(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function xt(){return Math.random().toString(36).substr(2,8)}function Jn(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,s=e.hash,c=s===void 0?"":s;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function Ct(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}var z,Be=function(e,t){return Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},Be(e,t)},At=function(e){function t(n,o){var r=e.call(this,"Translation failed")||this;return r.id=n,r.language=o,r}return function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function r(){this.constructor=n}Be(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}(t,e),t.is=function(n){return n instanceof t},t}(Error),Qn=function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e}();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(z||(z={}));var Zn=["{","}",","],eo=function(){function e(t){this.input=new Qn(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile(function(o){return!function(r){return Zn.includes(r)}(o)}).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:z.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:z.Text,value:this.readWhile(function(t){return t!=="{"&&t!=="}"})}},e.prototype.readVariableType=function(){var t=this.readWhile(function(n){return n!==","}).trim();return t==="plural"?z.Plural:t==="select"?z.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e}();function to(e,t,n){for(var o=new eo(t),r=[],s=function(c){var a=c.options,u=c.type,_=c.value;if(u!==z.Variable)if(a)if(u!==z.Select)try{r.concat(a[new Intl.PluralRules(e).select(n[_])].map(s))}catch{r.concat(a.other.map(s))}else r.concat((a[n[_]]||a.other).map(s));else r.push(_);else r.push(n[_])};!o.input.done;)s(o.next());return r}var nn=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(r,s){return new Intl.DateTimeFormat(n.language,s).format(r)},this.formatNumber=function(r,s){return new Intl.NumberFormat(n.language,s).format(r)},this.translate=function(r,s){s===void 0&&(s={});var c=n.getMessageById(r,s.defaultMessage);if(typeof c=="string")try{return to(n.language,c,s).join("")}catch{n.onError(new At(r,n.language))}return c+""},this.getMessageById=function(r,s){if(!n.memo[r]){var c=n.messages[r];c===void 0&&(c=r.split(".").reduce(function(a,u){return a?a[u]:void 0},n.messages)),typeof c!="string"&&(n.onError(new At(r,n.language)),c=s||r),n.memo[r]=c}return n.memo[r]};var o=t.find(function(r){return r.language===e});this.language=e,this.messages=o?o.messages:{}};function no(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var Je=ke({language:"",locales:[],setLanguage:function(){},translator:new nn}),oo=function(e){var t=e.children,n=e.language,o=e.locales,r=e.onError,s=I(n);L(function(){s[1](n)},[n]);var c=new nn(s[0],o);return r&&(c.onError=r),re(Je.Provider,{value:{language:s[0],locales:o,setLanguage:s[1],translator:c}},t)};function Qe(e){var t=ae(Je);return t.translator}var F=function(e){var t=e.html,n=e.id,o=e.tagName,r=o===void 0?"span":o,s=no(e,["children","html","id","tagName"]),c=ae(Je).translator.translate(n,s);return t?re(r,{dangerouslySetInnerHTML:{__html:c}}):re(j,null,c)};const Ze=ke(null),on=ke(!0),ro="Atrament Preact UI demo",so="atrament-preact-ui",io="Atrament Preact UI - shell for Ink games",co="light",ao="System",lo="en",uo={path:"game",source:"intercept.ink"},Se={name:ro,short_name:so,description:io,theme:co,font:ao,language:lo,game:uo},rn=Se.game.path,sn="intercept.ink.json",_o=["Atrament://",window.location.host,window.location.pathname,rn,"/",sn].join(""),fo=Se.language,cn=Se.theme,an=Se.font,et=100,$e=10,Ue=et-$e*3,We=et+$e*5,ho="_autosave_";function po(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}function go(e){const t=e.state.get().metadata.theme||cn;e.settings.get("theme")||e.settings.set("theme",t)}function mo(e){const t=e.state.get().metadata.font||an;e.settings.get("font")||e.settings.set("font",t)}const vo={"--bg-color":"#FCFCFC","--fg-color":"#5D576B","--shade-color":"rgba(0, 0, 0, 0.1)","--font-color":"#333333","--accent-bg-color":"#FCFCFC","--accent-fg-color":"#F7567C","--border-radius":"0.5rem","--border-radius-inline":"0.25rem"},yo={"--bg-color":"#ffeedb","--fg-color":"#4c3b4d","--shade-color":"rgba(0, 0, 0, 0.1)","--font-color":"#333333","--accent-bg-color":"#ffeedb","--accent-fg-color":"#a53850","--border-radius":"0.5rem","--border-radius-inline":"0.25rem"},bo={"--bg-color":"#4c3b4d","--fg-color":"#FCFCFC","--shade-color":"rgba(255, 255, 255, 0.1)","--font-color":"#EEEEEE","--accent-bg-color":"#EEEEEE","--accent-fg-color":"#F7567C","--border-radius":"0.5rem","--border-radius-inline":"0.25rem"},Ne={light:vo,sepia:yo,dark:bo};function ko(e){Object.entries(Ne[e]||Ne[cn]).forEach(([t,n])=>{document.documentElement.style.setProperty(t,n)})}const V='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',ie={System:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, ${V}`,"Sans Serif":`"Trebuchet MS", "Lucida Grande", Arial, Helvetica, ${V}`,Serif:`"Palatino", "Cambria", "Lucida Bright", "Georgia", "Times New Roman", ${V}`,Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", ${V}`,"Fira Sans":`"Fira Sans", sans-serif, ${V}`,Lora:`"Lora", serif, ${V}`,Merriweather:`"Merriweather", serif, ${V}`,OpenDyslexic:`"OpenDyslexic", serif, ${V}`};function wo(e){document.documentElement.style.setProperty("--font-game",ie[e]||ie[an])}async function So(e,t){if(e&&!document.fullscreenElement)try{await document.documentElement.requestFullscreen()}catch{t(!1)}else document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen()}function $o(e,t){So(e,t)}function Eo(e){e.settings.defineHandler("theme",(t,n)=>{ko(n)}),e.settings.defineHandler("font",(t,n)=>{wo(n)}),e.settings.defineHandler("fontSize",(t,n)=>{document.documentElement.style.setProperty("--game-font-size",`${n}%`)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")}),e.settings.defineHandler("fullscreen",(t,n)=>{$o(n,o=>{e.settings.set("fullscreen",o),e.settings.save()})})}function xo(e){e.images=[],e.content=e.content.map(t=>(t.tags.IMAGE&&(e.images.push(t.tags.IMAGE),t.image=t.tags.IMAGE),t))}function Co(e){e.choices=e.choices.map(t=>((t.tags.UNCLICKABLE||t.tags.DISABLED||t.tags.INACTIVE)&&(t.disabled=!0),t))}function Ao(e){var o,r;const t=(o=e.tags)==null?void 0:o.BACKGROUND;typeof t<"u"&&(e.images.push(t),this.state.setSubkey("game","background",t));const n=(r=e.tags)==null?void 0:r.PAGE_BACKGROUND;typeof n<"u"&&(e.images.push(n),this.state.setSubkey("game","background_page",n))}function Po(e){[xo,Co,Ao].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function Lo(e){e.ink.story().onError=t=>{e.state.setKey("ERROR",t)},e.state.setKey("OVERLAY",{activeOverlay:null,content:"",title:null})}async function To(e,t){e.on("*",(n,o)=>console.log(`%c Atrament > ${n} `,"color: #111111; background-color: #7FDBFF;",o)),Eo(e),await e.init(t,{applicationID:_o,settings:{fullscreen:!1,animation:!0,mute:!1,volume:50,fontSize:100}}),e.on("game/start",()=>Lo(e)),await e.game.init(rn,sn),await e.game.initInkStory(),go(e),mo(e),Po(e),po(e)}const Io="_application_wrapper_6fi81_1",Oo={application_wrapper:Io};let Ae;function ln(){window.innerHeight!==Ae&&(Ae=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${Ae-1}px`))}window.addEventListener("resize",ln);const Pt=({children:e})=>(L(ln,[]),i("div",{class:[Oo.application_wrapper,"atrament-ui-app"].join(" "),children:e})),Ro="_loading_ffxmc_1",Fo={loading:Ro},jo="_container_4l08p_1",Ho={container:jo},Ee=({children:e,style:t={}})=>i("div",{style:t,class:[Ho.container,"atrament-container"].join(" "),children:e}),Mo="_container_flex_at0vo_1",Vo={container_flex:Mo},tt=({children:e})=>i("div",{class:[Vo.container_flex,"atrament-flex-container"].join(" "),children:e}),zo="_sk_cube_grid_fv0g6_1",Do="_sk_cube1_fv0g6_17",Bo="_sk_cube2_fv0g6_18",Uo="_sk_cube3_fv0g6_19",Wo="_sk_cube4_fv0g6_20",No="_sk_cube5_fv0g6_21",qo="_sk_cube6_fv0g6_22",Yo="_sk_cube7_fv0g6_23",Go="_sk_cube8_fv0g6_24",Ko="_sk_cube9_fv0g6_25",H={sk_cube_grid:zo,"sk-cubeGridScaleDelay":"_sk-cubeGridScaleDelay_fv0g6_1",sk_cube1:Do,sk_cube2:Bo,sk_cube3:Uo,sk_cube4:Wo,sk_cube5:No,sk_cube6:qo,sk_cube7:Yo,sk_cube8:Go,sk_cube9:Ko},Xo=()=>i("div",{class:H.sk_cube_grid,children:[i("div",{class:H.sk_cube1}),i("div",{class:H.sk_cube2}),i("div",{class:H.sk_cube3}),i("div",{class:H.sk_cube4}),i("div",{class:H.sk_cube5}),i("div",{class:H.sk_cube6}),i("div",{class:H.sk_cube7}),i("div",{class:H.sk_cube8}),i("div",{class:H.sk_cube9})]}),Jo=()=>i(Ee,{children:i(tt,{children:i("div",{class:[Fo.loading,"atrament-loading"].join(" "),children:i(Xo,{})})})});function Qo(e,t,n){let o=new Set([...t,void 0]);return e.listen((r,s,c)=>{o.has(c)&&n(r,s,c)})}function Zo(e,t={}){let[,n]=I({}),[o]=I(e.get());return L(()=>{o!==e.get()&&n({})},[]),L(()=>{let r,s,c,a=()=>{r||(r=1,s=setTimeout(()=>{r=void 0,n({})}))};return t.keys?c=Qo(e,t.keys,a):c=e.listen(a),()=>{c(),clearTimeout(s)}},[e,""+t.keys]),e.get()}const C=()=>{const e=ae(Ze),t=$(a=>a?e.game.getAssetPath(a):null,[e]),n=$((a,u)=>{e.settings.set(a,u),e.settings.save()},[e]),o=$((...a)=>e.state.setSubkey(...a),[e]),r=$((a,u=[])=>{let _;try{_=e.ink.evaluateFunction(a,u,!0)}catch(d){e.ink.story().onError(d.toString()),_.error=d.toString()}return _},[e]),s=$((a,u)=>{try{e.ink.setVariable(a,u)}catch(_){e.ink.story().onError(_.toString())}},[e]),c=$(a=>{let u;try{u=e.ink.getVariable(a)}catch(_){e.ink.story().onError(_.toString())}return u},[e]);return{atrament:e,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:e.game.makeChoice,continueStory:e.game.continueStory,getAssetPath:t,updateSettings:n,setStateSubkey:o,evaluateInkFunction:r,setInkVariable:s,getInkVariable:c}},O=()=>{const e=ae(Ze);return Zo(e.store)},un=()=>{const{evaluateInkFunction:e,setStateSubkey:t}=C(),n=O(),o=$((c,a)=>{t("OVERLAY","activeOverlay",c);let u=a;const _=a.split(`
`),l=_.shift().match(/\[title\](.+?)\[\/title\]/i);l&&(t("OVERLAY","title",l[1]),u=_.join(`
`)),t("OVERLAY","content",u)},[t]),r=$(()=>{const c=n.OVERLAY.activeOverlay;if(c){const a=e(c);o(c,a.output)}},[n.OVERLAY.activeOverlay,o,e]),s=$(()=>{t("OVERLAY","activeOverlay",null),t("OVERLAY","content",""),t("OVERLAY","title",null)},[t]);return{refreshOverlay:r,closeOverlay:s,setOverlayContent:o,overlay:{active:n.OVERLAY.activeOverlay,content:n.OVERLAY.content.split(`
`),title:n.OVERLAY.title}}},er="_block_5hv3c_1",tr="_block_start_5hv3c_6",nr="_block_end_5hv3c_10",Pe={block:er,block_start:tr,block_end:nr},ve=({children:e,align:t=null})=>{const n=[Pe.block];return t==="start"?n.push(Pe.block_start):t==="end"&&n.push(Pe.block_end),n.push("atrament-block"),i("div",{class:n.join(" "),children:e})},or="_imagebox_hmqoq_1",rr="_image_hmqoq_1",Lt={imagebox:or,image:rr},_n=({src:e})=>i("div",{class:[Lt.imagebox,"atrament-image-container"].join(" "),children:i("img",{src:e,class:[Lt.image,"atrament-image"].join(" ")})}),sr="_header_1v1u3_1",ir="_header_align_1v1u3_9",Tt={header:sr,header_align:ir},cr=({children:e})=>i("div",{class:[Tt.header,"atrament-header"].join(" "),children:i("div",{class:Tt.header_align,children:e})}),ar="_link_menu_go234_1",lr={link_menu:ar},pe=({children:e,key:t,onClick:n})=>i("div",{children:i("button",{onClick:n,class:lr.link_menu,children:e},t)}),ur="_settings_container_13ssq_1",_r="_settings_toggle_13ssq_12",It={settings_container:ur,settings_toggle:_r},dr="_backdrop_rne3i_1",fr={backdrop:dr},dn=({onClick:e})=>i("div",{class:[fr.backdrop,"atrament-backdrop"].join(" "),onClick:e}),hr="_modal_1n9pe_1",pr={modal:hr},fn=({children:e})=>i("div",{class:[pr.modal,"atrament-modal"].join(" "),children:e}),gr="_close_eyo4x_1",mr={close:gr},hn=({onClick:e})=>i("div",{class:mr.close,children:i("button",{onClick:e,title:"Close",children:"✕"})}),vr="_collapse_ho40v_1",yr="_collapse_title_ho40v_6",br="_collapse_children_ho40v_12",Le={collapse:vr,collapse_title:yr,collapse_children:br},kr=({title:e,children:t})=>i("details",{class:Le.collapse,children:[i("summary",{class:Le.collapse_title,children:e}),i("div",{class:Le.collapse_children,children:t})]}),wr="_checkbox_wrapper_1bc4s_1",Sr="_checkbox_1bc4s_1",Ot={checkbox_wrapper:wr,checkbox:Sr,"focus-visible":"_focus-visible_1bc4s_56"},nt=({enabled:e,onChange:t})=>i("div",{class:Ot.checkbox_wrapper,children:i("input",{type:"checkbox",class:Ot.checkbox,checked:e,onChange:t})}),$r=()=>{const{updateSettings:e}=C(),t=O(),n=o=>e("fullscreen",o.target.checked);return i("div",{class:["atrament-settings-fullscreen"].join(" "),children:[i(nt,{enabled:t.settings.fullscreen,onChange:n})," ",i(F,{id:"settings.fullscreen"})]})},Er="_settings_sound_container_z755p_1",xr="_settings_sound_input_container_z755p_6",Cr="_settings_sound_volume_z755p_10",Ar="_settings_sound_icon_z755p_17",K={settings_sound_container:Er,settings_sound_input_container:xr,settings_sound_volume:Cr,settings_sound_icon:Ar},Pr=()=>i("svg",{fill:"none",viewBox:"0 0 15 15",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:i("path",{"clip-rule":"evenodd",d:"m2 3.5c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.2761.22386-.5.5-.5h10c.2761 0 .5.2239.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.2239-.5-.5z",style:"fill:var(--fg-color)","fill-rule":"evenodd"})}),Lr=()=>i("svg",{viewBox:"0 0 28 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:i("path",{d:"m150 3937.5h2v-16h-2zm-4-2h2v-12h-2zm-4-2h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-124 -3919)",style:"fill:var(--fg-color)"})}),Tr=()=>i("svg",{viewBox:"0 0 20 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:i("path",{d:"m222 3933.5h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-204 -3919)",style:"fill:var(--fg-color)"})}),Ir=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%",children:[i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z",style:"fill:var(--fg-color)"})]}),Or=()=>{const{updateSettings:e}=C(),t=O(),n=c=>e("mute",!c.target.checked),o=c=>e("volume",c.target.value),{mute:r,volume:s}=t.settings;return i(j,{children:[i("div",{class:[K.settings_sound,"atrament-settings-sound"].join(" "),children:[i(nt,{enabled:!r,onChange:n})," ",i(F,{id:"settings.sound"})]}),i("div",{class:K.settings_sound_container,children:[i("div",{class:K.settings_sound_icon,children:i(Tr,{})}),i("div",{class:K.settings_sound_input_container,children:i("input",{class:K.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:s,onChange:o})}),i("div",{class:K.settings_sound_icon,children:i(Lr,{})})]})]})},Rr="_settings_fontsize_container_1ho7s_1",Fr="_settings_font_a_1ho7s_6",jr="_settings_fontsize_input_container_1ho7s_12",Hr="_settings_fontsize_input_1ho7s_12",Mr="_settings_font_sample_1ho7s_22",U={settings_fontsize_container:Rr,settings_font_a:Fr,settings_fontsize_input_container:jr,settings_fontsize_input:Hr,settings_font_sample:Mr},pn=[];for(let e=Ue;e<=We;e+=$e)pn.push(e);const Vr=()=>{const{updateSettings:e}=C(),t=O(),{font:n,fontSize:o}=t.settings,r=s=>e("fontSize",s.target.value);return i("div",{class:[U.settings_text,"atrament-settings-text"].join(" "),children:[i("div",{class:U.settings_fontsize_container,children:[i("div",{class:U.settings_font_a,style:{"font-size":`${Ue}%`},children:"A"}),i("div",{class:U.settings_fontsize_input_container,children:[i("input",{class:U.settings_fontsize_input,type:"range",min:Ue,max:We,step:$e,value:o||et,onInput:r,list:"fontSizes"}),i("datalist",{id:"fontSizes",children:pn.map(s=>i("option",{value:s},s))})]}),i("div",{class:U.settings_font_a,style:{"font-size":`${We}%`},children:"A"})]}),i("div",{class:U.settings_font_sample,style:{"font-size":`${o}%`,"font-family":ie[n]},children:i(F,{id:"font.sampleText"})})]})},zr="_settings_font_container_yph84_1",Dr={settings_font_container:zr},Br=()=>{const{updateSettings:e}=C(),t=O(),n=r=>e("font",r.target.value),o=t.settings.font;return i("div",{class:[Dr.settings_font_container,"atrament-settings-font"].join(" "),children:i("select",{onChange:n,style:{"font-family":ie[o]},children:Object.entries(ie).map(([r,s])=>i("option",{value:r,style:{"font-family":s},selected:o===r,children:r},r))})})},Ur="_settings_theme_container_1gr28_1",Wr="_settings_theme_button_1gr28_8",gn={settings_theme_container:Ur,settings_theme_button:Wr},Nr=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["--fg-color"],"background-color":t["--bg-color"]};return i("button",{class:gn.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:i(F,{id:`themes.${e}`,defaultMessage:e})})},qr=()=>{const{updateSettings:e}=C(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return i("div",{class:[gn.settings_theme_container,"atrament-settings-theme"].join(" "),children:Object.entries(Ne).map(([n,o])=>i(Nr,{themeId:n,themeConfig:o,onClick:t},n))})},Yr=()=>{const{updateSettings:e}=C(),t=O(),n=o=>e("animation",o.target.checked);return i("div",{class:["atrament-settings-animation"].join(" "),children:[i(nt,{enabled:t.settings.animation,onChange:n})," ",i(F,{id:"settings.animations"})]})},Gr="_settings_about_hjypz_1",Kr={settings_about:Gr},Xr=()=>{const{atrament:e}=C();return i("div",{class:Kr.settings_about,children:["atrament ",e.version]})},Jr="_link_home_1sln5_1",Qr={link_home:Jr},mn=({children:e,onClick:t})=>i("button",{onClick:t,class:Qr.link_home,children:e},"mainmenu"),Zr=()=>{const{atrament:e}=C();return i(mn,{onClick:async()=>{await e.game.save(ho),q("/")},children:i(F,{id:"game.save-and-quit"})})},ot=({showSaveAndQuit:e=!1})=>{const t=Qe(),[n,o]=I(!1),r=$(()=>o(!n),[n]),s=$(c=>{c.key==="Escape"&&r()},[r]);return L(()=>(document.addEventListener("keydown",s,!1),()=>{document.removeEventListener("keydown",s,!1)}),[s]),n?i("div",{class:It.settings_container,children:[i(dn,{onClick:r}),i(fn,{children:[i(hn,{onClick:r}),i($r,{}),i(Yr,{}),i(Or,{}),i(kr,{title:t.translate("settings.appearance"),children:[i(Br,{}),i(Vr,{}),i(qr,{})]}),e?i(Zr,{}):i(j,{}),i(Xr,{})]})]}):i("button",{class:It.settings_toggle,onClick:r,children:i(Pr,{})})},vn=(e,t)=>{e?(document.body.style.backgroundImage=`url(${t(e)})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"):document.body.style.backgroundImage="none"},es=()=>{const e=Qe(),{setStateSubkey:t,canResume:n,gameStart:o,gameResume:r,getAssetPath:s}=C(),c=O(),{title:a,author:u,cover:_,background:d}=c.metadata,l=$(()=>{t("game","background",null),t("game","background_page",null)},[t]),[p,f]=I(!1);L(()=>{(async()=>{const y=await n();f(!!y)})(),l(),vn(d,s)},[l,n,d,s]);const h=$(async()=>{l(),await o(),q("/game")},[l,o]),k=$(async()=>{l(),await r(),q("/game")},[l,r]),b=()=>q("/about");return i(Ee,{children:i(tt,{children:[i(ot,{}),i(cr,{children:[_?i(_n,{src:s(_)}):"",i("h1",{children:a||e.translate("default.title")}),i("p",{children:u||e.translate("default.author")})]}),i(ve,{align:"end",children:[p?i(pe,{onClick:k,children:i(F,{id:"main.continue"})},"continuegame"):"",i(pe,{onClick:h,children:i(F,{id:"main.newgame"})},"startgame"),i(pe,{onClick:b,children:i(F,{id:"main.about"})},"about")]})]})})},ts="_error_modal_yytsh_1",ns="_error_message_yytsh_12",Rt={error_modal:ts,error_message:ns},os=()=>{const{atrament:e}=C(),t=O(),n=$(()=>e.state.setKey("ERROR",null),[e]),o=$(r=>{r.key==="Escape"&&n()},[n]);if(L(()=>(document.addEventListener("keydown",o,!1),()=>{document.removeEventListener("keydown",o,!1)}),[o]),t.ERROR)return i("div",{class:Rt.error_modal,children:[i(dn,{onClick:n}),i(fn,{children:[i(hn,{onClick:n}),i("p",{class:Rt.error_message,children:t.ERROR})]})]})},rs="_toolbar_y184t_1",ss={toolbar:rs},is="_inline_button_ws4x6_1",cs="_bordered_button_ws4x6_19",Ft={inline_button:is,bordered_button:cs};function Q(e){const t=e.match(/(\w+)=["']?((?:.?(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?/g),n={};return t&&t.forEach(o=>{const[,r,s]=o.match(/(.+)=(.+)/);try{n[r]=JSON.parse(s)}catch{n[r]=s}}),n}const as=({children:e,options:t})=>{const{evaluateInkFunction:n}=C(),{setOverlayContent:o,refreshOverlay:r}=un(),s=$(()=>{const a=t.onclick,u=n(a);u.output?o(a,u.output):r()},[n,o,r,t.onclick]);let c=t.bordered===!1?Ft.inline_button:Ft.bordered_button;return i("button",{class:c,onClick:s,disabled:t.disabled,children:e})},ls={regexp:/\[button.+?\].+?\[\/button\]/ig,replacer:(e,t)=>{const n=e.match(/\[button(.+?)\](.+?)\[\/button\]/i);let o=n[1];o.startsWith("=")&&(o=`onclick${o}`);const r=Q(o);return i(as,{options:r,children:t(n[2])})}},us="_inline_image_1jlev_1",_s={inline_image:us},ds=({src:e})=>{const{getAssetPath:t}=C();return i("img",{class:_s.inline_image,src:t(e)})},fs={regexp:/\[img\].+?\[\/img\]/ig,replacer:e=>{const t=e.match(/\[img\](.+?)\[\/img\]/i);return i(ds,{src:t[1]})}},hs="_inline_link_1di4e_1",ps={inline_link:hs},gs=({children:e,choice:t})=>{const{atrament:n,makeChoice:o,continueStory:r}=C(),s=O(),c=$(()=>{const a=s.scenes.length-1,_=s.scenes[a].choices.findIndex(d=>d.choice===t);if(_<0){n.state.setKey("ERROR",`[link=${t}] leads to nonexistent choice!`);return}o(_),r()},[n,r,o,t,s]);return i("a",{href:"#",class:ps.inline_link,onClick:c,children:e})},ms={regexp:/\[link=.+?\].+?\[\/link\]/ig,replacer:(e,t)=>{const n=e.match(/\[link=(.+?)\](.+?)\[\/link\]/i);return i(gs,{choice:n[1],children:t(n[2])})}},vs="_progress_frame_17ofj_1",ys="_progress_bar_17ofj_7",bs="_standard_17ofj_14",ks="_accent_17ofj_18",ws="_progress_content_17ofj_22",Z={progress_frame:vs,progress_bar:ys,standard:bs,accent:ks,progress_content:ws},Ss=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let s=r?(r-n)*100/(o-n):0;s>100&&(s=100),s<0&&(s=0);const c=[Z.progress_bar];return e.style==="accent"?c.push(Z.accent):c.push(Z.standard),i("div",{class:Z.progress_frame,children:[i("div",{class:c.join(" "),style:{width:`${s}%`}}),i("div",{class:Z.progress_content,children:[t," "]})]})},$s={regexp:/\[progress.+?\].*?\[\/progress\]/ig,replacer:(e,t)=>{const n=e.match(/\[progress(.+?)\](.*?)\[\/progress\]/i),o=Q(n[1]);return i(Ss,{options:o,children:t(n[2])})}},Es="_input_1c260_1",xs={input:Es},Cs=({options:e})=>{const t=ae(on),[n,o]=I(null),{getInkVariable:r,setInkVariable:s}=C();L(()=>o(r(e.var)),[r,e.var]);const c=u=>{let _=u.srcElement.value||n;e.type==="number"&&(_=+_),s(e.var,_),o(_)},a=e.type==="number"?"number":"text";return i("input",{disabled:!t,class:xs.input,value:n,placeholder:e.placeholder,type:a,onInput:c})},As={regexp:/\[input.+?\]/ig,replacer:e=>{const t=e.match(/\[input(.+?)\]/i),n=Q(t[1]);return i(Cs,{options:n})}},Ps="_hidden_1ydvn_1",Ls="_revealed_1ydvn_12",jt={hidden:Ps,revealed:Ls},Ts=[jt.hidden,jt.revealed],Is=({children:e})=>{const[t,n]=I(0);return i("span",{class:Ts[t],onClick:()=>n(1-t),children:i("span",{children:e})})},Os={regexp:/\[spoiler\].*?\[\/spoiler\]/ig,replacer:(e,t)=>{const n=e.match(/\[spoiler\](.*?)\[\/spoiler\]/i);return i(Is,{children:t(n[1])})}},Rs="_infoblock_10o9f_1",Fs="_font_ui_10o9f_9",js="_side_highlight_10o9f_13",Hs="_side_accent_10o9f_17",_e={infoblock:Rs,font_ui:Fs,side_highlight:js,side_accent:Hs},Ms=({children:e,options:t})=>{const n=[_e.infoblock];return t.font==="system"&&n.push(_e.font_ui),t.side&&(t.side==="accent"?n.push(_e.side_accent):n.push(_e.side_highlight)),i("div",{class:n.join(" "),children:e})},Vs={regexp:/\[info.*?\].*?\[\/info\]/ig,replacer:(e,t)=>{const n=e.match(/\[info(.*?)\](.*?)\[\/info\]/i),o=Q(n[1]);return i(Ms,{options:o,children:t(n[2])})}},zs="_bannerblock_1ry2a_1",Ds="_accent_1ry2a_11",Bs="_allcaps_1ry2a_17",Te={bannerblock:zs,accent:Ds,allcaps:Bs},Us=({children:e,options:t})=>{const n=[Te.bannerblock];return t.style==="accent"&&n.push(Te.accent),t.allcaps&&n.push(Te.allcaps),i("div",{class:n.join(" "),children:e})},Ws={regexp:/\[banner.*?\].*?\[\/banner\]/ig,replacer:(e,t)=>{const n=e.match(/\[banner(.*?)\](.*?)\[\/banner\]/i),o=Q(n[1]);return i(Us,{options:o,children:t(n[2])})}},Ns={regexp:/\[font=.+?\].+?\[\/font\]/ig,replacer:(e,t)=>{const n=e.match(/\[font=(.+?)\](.+?)\[\/font\]/i);return i("span",{style:{"font-family":n[1]},children:t(n[2])})}},qs={regexp:/\[highlight.*?\].+?\[\/highlight\]/ig,replacer:(e,t)=>{const n=e.match(/\[highlight(.*?)\](.+?)\[\/highlight\]/i);let o={};n[1]&&(o=Q(n[1]));const r={display:"inline-block","background-color":o.bgcolor||"var(--accent-bg-color)",color:o.color||"var(--accent-fg-color)"};return i("span",{style:r,children:t(n[2])})}},Ys=[ls,fs,ms,$s,As,Os,Vs,Ws,Ns,qs],Gs=({index:e,item:t})=>i("span",{dangerouslySetInnerHTML:{__html:t}},e),Ks=e=>/<\/?[a-z][\s\S]*>/i.test(e);function Xs(e,t,n){if(typeof e!="string")return e;const o=e.match(t);return o?e.split(t).flatMap((c,a)=>a<o.length?[c,n(o[a],yn)]:[c]):e}function yn(e){let t=[e];return Ys.forEach(n=>{t=t.flatMap(o=>Xs(o,n.regexp,n.replacer))}),t.map((n,o)=>typeof n=="string"&&Ks(n)?Gs({index:o,item:n}):n)}const xe=({content:e,isActive:t=!0})=>{const n=Ke(()=>yn(e),[e]);return i(on.Provider,{value:t,children:n})},Js=()=>{const e=Qe(),{evaluateInkFunction:t}=C(),n=O(),[o,r]=I(!1),{title:s,toolbar:c}=n.metadata;let a=s||e.translate("default.title");if(c&&!o){const u=t(c);u.output?a=u.output:u.error&&r(!0)}return i("div",{class:[ss.toolbar,"atrament-toolbar"].join(" "),children:i(xe,{content:a})})},Qs="_container_text_138rh_1",Zs={container_text:Qs},rt=({children:e})=>i("div",{class:[Zs.container_text,"atrament-text-container"].join(" "),children:e}),ei="_container_scenes_13lih_1",ti={container_scenes:ei},ni=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",oi=({children:e,align:t})=>i("div",{class:[ti.container_scenes,"atrament-container-scene"].join(" "),style:{"justify-content":ni(t)},children:e}),ri="_container_choices_41rpm_1",si={container_choices:ri},ii=({children:e,key:t,isReady:n})=>i("div",{class:[si.container_choices,"atrament-container-choices",n?"animation_appear":""].join(" "),children:i("div",{style:{opacity:n?1:0},children:i(ve,{children:e})})},t),ci="_scene_1or5e_1",ai={scene:ci},bn=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function li(e,t){this.scrollLeft=e,this.scrollTop=t}const kn=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,wn=(e,t,n)=>kn(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),Ht=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},ui=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},st=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function _i(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const di=e=>.5*(1-Math.cos(Math.PI*e));function it(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),it=t,t()}const fi=500,Sn=e=>{const n=(it()-e.timeStamp)/(e.duration||fi);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||di)(n),r=e.startX+(e.targetX-e.startX)*o,s=e.startY+(e.targetY-e.startY)*o;e.method(r,s),e.rafId=window.requestAnimationFrame(()=>{Sn(e)})},ye=e=>isFinite(e)?Number(e):0,hi=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},pi=(e,t,n)=>{var o,r;if(!hi(e))return;const s=e.scrollLeft,c=e.scrollTop,a=ye((o=t.left)!==null&&o!==void 0?o:s),u=ye((r=t.top)!==null&&r!==void 0?r:c);if(a===s&&u===c)return;const _=Ht(HTMLElement.prototype,"scroll",li),d=Ht(Object.getPrototypeOf(e),"scroll",_).bind(e);if(t.behavior!=="smooth"){d(a,u);return}const l=()=>{window.removeEventListener("wheel",h),window.removeEventListener("touchmove",h)},p=()=>{l();const k=e.nodeType===9;e.dispatchEvent(_i(k))},f=Object.assign(Object.assign({},n),{timeStamp:it(),startX:s,startY:c,targetX:a,targetY:u,rafId:0,method:d,callback:p}),h=()=>{window.cancelAnimationFrame(f.rafId),l()};window.addEventListener("wheel",h,{passive:!0,once:!0}),window.addEventListener("touchmove",h,{passive:!0,once:!0}),Sn(f)},gi=e=>e.window===e,mi=e=>(t,n,o)=>{const[r,s]=gi(t)?[st(t.document.documentElement),"Window"]:[t,"Element"],c=n??{};if(!ui(c))throw new TypeError(kn(e,s));if(!bn(c.behavior))throw new TypeError(wn(e,s,c.behavior));e==="scrollBy"&&(c.left=ye(c.left)+r.scrollLeft,c.top=ye(c.top)+r.scrollTop),pi(r,c,o)},vi=mi("scroll"),yi=vi,$n=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},En=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},bi=e=>(En($n(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,ki=(e,t,n)=>{const[o,r,s]=En(t,n,e.block||"start",e.inline||"nearest");return[r,s].map((c,a)=>{switch(c){case"center":return 1;case"nearest":return 0;default:{const u=o>>a&1;return c==="start"==!u?2:3}}})},Mt=(e,t,n,o,r,s,c)=>e!==0?e:r<t&&s>n||r>t&&s<n?null:r<=t&&c<=o||s>=n&&c>=o?2:s>n&&c<o||r<t&&c>o?3:null,Vt=e=>e!=="visible"&&e!=="clip",wi=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},Si=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?Vt(t.overflowY)||Vt(t.overflowX)||e===st(e):!1,zt=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return wi(e)}return n},Ie=(e,t,n)=>e<t?t:e>n?n:e,$i=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],Ei=(e,t,n)=>{const{top:o,right:r,bottom:s,left:c}=t,a=$i(e.ownerDocument);if(!a)return[o,r,s,c];const u=_=>{const d=n.getPropertyValue(`${a}-${_}`);return parseInt(d,10)||0};return[o-u("top"),r+u("right"),s+u("bottom"),c-u("left")]},de=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},xi=(e,t)=>{var n,o,r;const s=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[c,a,u,_]=e===st(e)?[0,0,(o=s==null?void 0:s.width)!==null&&o!==void 0?o:e.clientWidth,(r=s==null?void 0:s.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],d=c+e.clientLeft,l=a+e.clientTop,p=d+u,f=l+_;return[l,p,f,d]},Ci=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const s=window.getComputedStyle(e),c=s.direction!=="rtl",a=$n(s.writingMode||s.getPropertyValue("-webkit-writing-mode")||s.getPropertyValue("-ms-writing-mode")),[u,_]=ki(t,a,c);let[d,l,p,f]=Ei(e,e.getBoundingClientRect(),s);for(let h=zt(e);h!==null;h=zt(h)){if(o!==h.ownerDocument){if(o=h.ownerDocument,r=o.defaultView,!r)break;const{left:B,top:ct}=h.getBoundingClientRect();d+=ct,l+=B,p+=ct,f+=B}const k=r.getComputedStyle(h);if(k.position==="fixed")break;if(!Si(h,k))continue;const b=h.getBoundingClientRect(),[m,y,g,v]=xi(h,b),A=Mt(u,v,y,h.clientWidth,f,l,l-f),E=Mt(_,m,g,h.clientHeight,d,p,p-d),R=A===null?0:de(A,f,l)-de(A,v,y),G=E===null?0:de(E,d,p)-de(E,m,g),D=bi(k)?Ie(R,-h.scrollWidth+h.clientWidth-h.scrollLeft,-h.scrollLeft):Ie(R,-h.scrollLeft,h.scrollWidth-h.clientWidth-h.scrollLeft),P=Ie(G,-h.scrollTop,h.scrollHeight-h.clientHeight-h.scrollTop);n.push([h,{left:h.scrollLeft+D,top:h.scrollTop+P,behavior:t.behavior}]),d=Math.max(d-P,m),l=Math.min(l-D,y),p=Math.min(p-P,g),f=Math.max(f-D,v)}return n},Ai=(e,t,n)=>{const o=t||{};if(!bn(o.behavior))throw new TypeError(wn("scrollIntoView","Element",o.behavior));Ci(e,o).forEach(([s,c])=>{yi(s,c,n)})},Pi="_paragraph_gh666_1",Li={paragraph:Pi},Ti=({content:e,isCurrent:t})=>{if(e.text===`
`)return i(j,{});let n;t||(n={opacity:"70%"});let o=e.tags.CLASS;return Array.isArray(o)&&(o=o.join(" ")),i("div",{style:n,class:`${Li.paragraph} ${o}`,children:i(xe,{content:e.text,isActive:t})})};function Ii(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{const s=new Image;s.onload=r,s.onerror=r,s.src=e(o)}));return Promise.allSettled(n)}const Oi=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const{getAssetPath:r}=C(),[s,c]=I(!1),a=Hn(null),u=$(_=>{o(!0),setTimeout(()=>{Ai(a.current,{behavior:_,block:"start"},{duration:300})},100)},[o]);return L(()=>{s&&t&&u(n?"instant":"smooth")},[s,t,n,u]),L(()=>{(async()=>{await Ii(r,e.images),c(!0)})()},[e,c,r]),i("div",{class:[ai.scene,"atrament-scene",t&&s?"animation_appear":""].join(" "),ref:a,children:i("div",{style:{opacity:s?1:0},children:e.content.map((_,d)=>i(j,{children:[_.image&&i(_n,{src:r(_.image)}),i(Ti,{isCurrent:t,content:_})]},`paragraph-${e.uuid}-${d}`))})})},Ri="_choice_button_1tj3k_1",Fi="_choice_active_1tj3k_20",ji="_choice_inactive_1tj3k_44",Hi="_disappear_1tj3k_1",Oe={choice_button:Ri,choice_active:Fi,choice_inactive:ji,disappear:Hi},Mi=({choice:e,chosen:t,handleClick:n})=>{const o=t!==null,r=t===e.id,s=()=>{o||n(e.id)},c=o?r?Oe.choice_active:Oe.choice_inactive:"";let a=e.tags.CLASS;return Array.isArray(a)&&(a=a.join(" ")),i("button",{class:`${Oe.choice_button} ${c} ${a}`,onClick:s,disabled:e.disabled,children:i(xe,{content:e.choice})})},Vi=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:r}=C(),[s,c]=I(null),a=t&&t.choices?t.choices.length:-1,u=$(d=>{const l=a>1?350:150;c(d),setTimeout(()=>{setTimeout(()=>{c(null),n(!1),o(d),r()},l)},0)},[o,r,n,a]),_=$(d=>{const l=+d.key;d.target.tagName.toLowerCase()!=="input"&&a>0&&l>0&&l<=a&&!t.choices[l-1].disabled&&u(l-1)},[a,u,t.choices]);return L(()=>(document.addEventListener("keydown",_,!1),()=>{document.removeEventListener("keydown",_,!1)}),[_]),i(j,{children:t.choices.map((d,l)=>i(Mi,{choice:d,chosen:s,handleClick:u},`${e}-${l}`))})},zi=()=>{const{atrament:e}=C();return i(mn,{onClick:async()=>{await e.game.removeSave(),q("/")},children:i(F,{id:"game.end"})})},Di=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const r=t&&t.choices?t.choices.length:-1;if(r===0)return i(zi,{});if(r>=0&&!o)return i(Vi,{currentScene:t,setReady:n},e)},Bi=()=>{var c;const e=O(),[t,n]=I(!1),o=e.scenes.length-1,r=!!e.metadata.hypertext,s=`choices-${(c=e.scenes[o])==null?void 0:c.uuid}`;return i(rt,{children:[i(oi,{align:e.metadata.scenes_align,children:e.scenes.map((a,u)=>i(Oi,{scene:a,isCurrent:u===o,isSingle:o===0,readyHandler:n},a.uuid))}),i(ii,{isReady:t,children:i(Di,{currentScene:e.scenes[o],setReady:n,isHypertextMode:r},s)},s)]})},Ui="_overlay_container_1lt26_1",Wi="_overlay_header_1lt26_11",Ni="_overlay_title_1lt26_24",qi="_overlay_content_1lt26_33",Yi="_button_back_1lt26_48",ee={overlay_container:Ui,overlay_header:Wi,overlay_title:Ni,overlay_content:qi,button_back:Yi},Gi=()=>{const{overlay:e,closeOverlay:t}=un();return e.active?i("div",{class:ee.overlay_container,children:[i("div",{class:ee.overlay_header,children:[i("button",{class:ee.button_back,onClick:t,children:i(Ir,{})}),e.title&&i("div",{class:ee.overlay_title,children:e.title})]}),i("div",{class:[ee.overlay_content,"atrament-overlay"].join(" "),children:i(rt,{children:e.content.map((n,o)=>i("p",{children:i(xe,{content:n})},o))})})]}):i(j,{})},Ki=()=>{const{continueStory:e,getAssetPath:t}=C(),n=O();L(()=>{e()},[e]);let o;n.game.background&&(o={"background-image":`url(${t(n.game.background)})`,"background-size":"cover","background-position":"center"});const r=n.game.background_page;return L(()=>{vn(r,t)},[r,t]),i(Ee,{style:o,children:[i(ot,{showSaveAndQuit:!0}),i(os,{}),i(Js,{}),i(Gi,{}),i(Bi,{})]})},Xi=()=>i(Ee,{children:[i(ot,{}),i(rt,{children:[i(tt,{children:i(ve,{children:[i("img",{src:"logo.png",style:{margin:"auto",display:"block",width:"50%"}}),i("h1",{style:{"text-align":"center"},children:"Atrament UI"}),i("p",{children:"Web UI for Ink games, made with:"}),i("ul",{children:[i("li",{children:i("a",{href:"https://github.com/technix/atrament-core",target:"_blank",rel:"noreferrer",children:"Atrament"})}),i("li",{children:i("a",{href:"https://github.com/y-lohse/inkjs",target:"_blank",rel:"noreferrer",children:"InkJS"})}),i("li",{children:i("a",{href:"https://preactjs.com/",target:"_blank",rel:"noreferrer",children:"Preact"})}),i("li",{children:i("a",{href:"https://howlerjs.com/",target:"_blank",rel:"noreferrer",children:"Howler"})}),i("li",{children:i("a",{href:"https://github.com/nanostores/nanostores",target:"_blank",rel:"noreferrer",children:"Nanostores"})}),i("li",{children:i("a",{href:"https://github.com/localForage/localForage",target:"_blank",rel:"noreferrer",children:"localForage"})}),i("li",{children:i("a",{href:"https://github.com/101arrowz/fflate",target:"_blank",rel:"noreferrer",children:"fflate"})})]})]})}),i(ve,{children:i(pe,{onClick:()=>q("/"),children:i(F,{id:"main.menu"})},"mainmenu")})]})]}),Ji=[{language:"en",messages:{"default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.continue":"Continue","main.about":"About","game.end":"The end","game.save-and-quit":"Save game and quit","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","settings.appearance":"Appearance","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz."}},{language:"ua",messages:{"default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.continue":"Продовжити","main.about":"Про застосунок","game.end":"Кінець","game.save-and-quit":"Зберегти гру та вийти","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","settings.appearance":"Вигляд","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб."}}];let fe;function Qi(){const[e,t]=I(!1);L(()=>{(async()=>{fe=(await dt(()=>import("./index-vM064td3.js"),[],import.meta.url)).default;const{Story:s}=await dt(async()=>{const{Story:c}=await import("./ink-CADOJafZ.js");return{Story:c}},[],import.meta.url);await To(fe,s),t(!0)})()},[]);const n=$(o=>{o.url==="/"&&o.previous&&fe.game.clear()},[]);return e?i(oo,{language:fo,locales:Ji,children:i(Ze.Provider,{value:fe,children:i(Pt,{children:i(tn,{history:Xn(),onChange:n,children:[i(es,{path:"/"}),i(Ki,{path:"/game"}),i(Xi,{path:"/about"})]})})})}):i(Pt,{children:i(Jo,{})})}Tn(i(Qi,{}),document.getElementById("app"));
